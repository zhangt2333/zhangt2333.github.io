<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 3.9.0"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>计算机系统原理-二进制炸弹拆解实验记录 - Zhang T&#39;s Blog</title><link rel="icon" href="/images/favicon.svg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="/css/back-to-top.css"><link rel="stylesheet" href="/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><link rel="stylesheet" href="/css/style.css"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"><a class="navbar-item navbar-logo" href="/">TTTT&#39;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a> <a class="navbar-item" href="/archives">归档</a> <a class="navbar-item" href="/categories">分类</a> <a class="navbar-item" href="/tags">标签</a> <a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/zhangt2333"><i class="fab fa-github"></i> </a><a class="navbar-item" target="_blank" title="E-mail" href="mailto:zhangt2333@gmail.com"><i class="fa fa-envelope-open"></i> </a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i> </a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card"><div class="card-content article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><i class="fas fa-angle-double-right"></i>计算机系统原理-二进制炸弹拆解实验记录</h1><div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto"><div class="level-left"><time class="level-item has-text-grey" datetime="2018-11-26T23:00:00.000Z"><i class="far fa-calendar-alt">&nbsp;</i>2018-11-27</time> <time class="level-item has-text-grey is-hidden-mobile" datetime="2021-06-20T11:46:22.008Z"><i class="far fa-calendar-check">&nbsp;</i>2021-06-20</time><div class="level-item"><i class="far fa-folder-open has-text-grey"></i>&nbsp; <a class="has-link-grey -link" href="/categories/CS/">CS</a></div><span class="level-item has-text-grey"><i class="far fa-clock"></i>&nbsp; 1 小时 读完 (大约 8664 个字) </span><span class="level-item has-text-grey" id="busuanzi_container_page_pv"><i class="far fa-eye"></i> <span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><div class="content"><h2 id="拆弹前置"><a href="#拆弹前置" class="headerlink" title="拆弹前置"></a>拆弹前置</h2><h3 id="mips学习"><a href="#mips学习" class="headerlink" title="mips学习"></a>mips学习</h3><p>视频：</p><ul><li><a href="https://www.bilibili.com/video/av34932484/?p=37" target="_blank" rel="noopener">https://www.bilibili.com/video/av34932484/?p=37</a></li><li><a href="https://www.bilibili.com/video/av34932484/?p=38" target="_blank" rel="noopener">https://www.bilibili.com/video/av34932484/?p=38</a></li></ul><p>指令现查：</p><ul><li><a href="https://blog.csdn.net/sdreamq/article/details/50776404" target="_blank" rel="noopener">https://blog.csdn.net/sdreamq/article/details/50776404</a></li><li><a href="https://www.cnblogs.com/blacksunny/p/7192416.html" target="_blank" rel="noopener">https://www.cnblogs.com/blacksunny/p/7192416.html</a></li></ul><p>寄存器现查：</p><a id="more"></a><table><thead><tr><th>寄存器名</th><th>地址编号</th><th>用途说明</th></tr></thead><tbody><tr><td><code>$0</code></td><td>0</td><td>保存固定的常数0</td></tr><tr><td><code>$at</code></td><td>1</td><td>汇编器专用</td></tr><tr><td><code>$v0 ~ $v1</code></td><td>2 ~ 3</td><td>表达式计算或函数调用的返回结果</td></tr><tr><td><code>$a0 ~ $a3</code></td><td>4 ~ 7</td><td>函数调用参数1～3</td></tr><tr><td><code>$t0 ~ $t7</code></td><td>8 ~ 15</td><td>临时变量，函数调用时不需要保存和恢复</td></tr><tr><td><code>$s0 ~ $s7</code></td><td>16 ~ 23</td><td>函数调用时需要保存和恢复的寄存器变量</td></tr><tr><td><code>$t8 ~ $t9</code></td><td>24 ~ 25</td><td>临时变量，函数调用时不需要保存和恢复</td></tr><tr><td><code>$k0 ~ $k1</code></td><td>26 ~ 27</td><td>操作系统专用</td></tr><tr><td><code>$gp</code></td><td>28</td><td>全局指针变量(Global Pointer)</td></tr><tr><td><code>$sp</code></td><td>29</td><td>堆栈指针变量(Stack Pointer)</td></tr><tr><td><code>$fp</code></td><td>30</td><td>帧指针变量(Frame Pointer)</td></tr><tr><td><code>$ra</code></td><td>31</td><td>返回地址(Return Address)</td></tr></tbody></table><h3 id="GDB使用"><a href="#GDB使用" class="headerlink" title="GDB使用"></a>GDB使用</h3><p>启动gdb：<code>gdb bomb</code></p><p>查看反编译dump：<code>disas 函数名</code></p><p>查看断点：<code>info breakpoints</code></p><p>删除断点：<code>delete id</code></p><p>监控变量：<code>display 变量地址</code>，最好用之一，结合<code>*</code>用</p><p>查看变量：<code>x[/][num][d/c] 地址</code>，最好用之一</p><p>打印变量值：<code>p 地址</code></p><p>查看寄存器：<code>i r 寄存器</code></p><p>下一条指令：<code>ni</code></p><p>向下执行直到遇到断点：<code>n</code></p><p>万能代码：<code>help</code></p><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul><li><p>阅读反编译代码、<strong>汇编代码</strong></p><ul><li>反编译代码：顺式结构，但是会往回跳，对于一些对象常量赋值直接上地址而不是标签</li><li>汇编代码：”跳来跳去”，但是常量一目了然，对于对象常量赋值使用了<strong>标签</strong></li></ul></li><li><p>gdb断点调试、变量监控</p><ul><li>看不懂反编译代码里寄存器附近有什么的时候，多用gdb的x指令</li><li>display结合ni，监控变量变化</li></ul></li><li><p>写注释以及对代码分段</p><ul><li>对于循环结构，容易找到循环节</li></ul></li></ul><h2 id="愉快拆弹"><a href="#愉快拆弹" class="headerlink" title="愉快拆弹"></a>愉快拆弹</h2><p>下面涉及到题解，想要<code>7倍的快乐</code>的同学请自己拆弹。</p><p>注：注释有些许错误。</p><p><strong>自己拆解可以得到乐趣，领悟真谛！</strong></p><h3 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h3><p>首先简单看一下这个Main，基本上是6关相连着：读入、进关、出关。</p><p>完成一个关卡会执行一次<code>phase_defused</code>这个关卡完成函数，输出祝福语之类的。当然里面有点秘密就是了。</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function main:</span><br><span class="line">   0x00400900 &lt;+0&gt;:	addiu	sp,sp,-48</span><br><span class="line">   # ... 省略</span><br><span class="line">   0x00400ba8 &lt;+680&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ... </span><br><span class="line">   0x00400bbc &lt;+700&gt;:	jal	0x400d6c &lt;phase_1&gt;</span><br><span class="line">   # ...</span><br><span class="line">   0x00400bc8 &lt;+712&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ... </span><br><span class="line">   0x00400bf4 &lt;+756&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ... </span><br><span class="line">   0x00400c08 &lt;+776&gt;:	jal	0x400dbc &lt;phase_2&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400c14 &lt;+788&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400c40 &lt;+832&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400c54 &lt;+852&gt;:	jal	0x400ed4 &lt;phase_3&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400c60 &lt;+864&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400c8c &lt;+908&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400ca0 &lt;+928&gt;:	jal	0x4012bc &lt;phase_4&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400cac &lt;+940&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400cd8 &lt;+984&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400cec &lt;+1004&gt;:	jal	0x4013e8 &lt;phase_5&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400cf8 &lt;+1016&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400d24 &lt;+1060&gt;:	jal	0x401fec &lt;read_line&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400d38 &lt;+1080&gt;:	jal	0x401500 &lt;phase_6&gt;</span><br><span class="line">   # ...  </span><br><span class="line">   0x00400d44 &lt;+1092&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   # ... </span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><p>下面进入第一关：</p><h3 id="Phase-1"><a href="#Phase-1" class="headerlink" title="Phase_1"></a>Phase_1</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_1:</span><br><span class="line">   0x00400d6c &lt;+0&gt;:	addiu	sp,sp,-32</span><br><span class="line">   0x00400d70 &lt;+4&gt;:	sw	ra,28(sp)</span><br><span class="line">   0x00400d74 &lt;+8&gt;:	sw	s8,24(sp)</span><br><span class="line">   0x00400d78 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   # 为函数所需空间压栈</span><br><span class="line">   </span><br><span class="line">   0x00400d7c &lt;+16&gt;:	sw	a0,32(s8)          # 32(s8) = a0</span><br><span class="line">   0x00400d80 &lt;+20&gt;:	lw	a0,32(s8)          # a0 = 32(s8)</span><br><span class="line">   # 设置函数参数a0</span><br><span class="line">  </span><br><span class="line">   0x00400d84 &lt;+24&gt;:	lui	v0,0x40            </span><br><span class="line">   0x00400d88 &lt;+28&gt;:	addiu	a1,v0,10092</span><br><span class="line">   # 设置函数参数a1。0x40和10092不是简单的数字常量是地址这里，查汇编代码发现和&quot;$LC12&quot;标签有关，这个标签是常量&apos;.ascii	&quot;Let&apos;s begin now!\000&quot;&apos;</span><br><span class="line">   </span><br><span class="line">   0x00400d8c &lt;+32&gt;:	jal	0x401cf8 &lt;strings_not_equal&gt;</span><br><span class="line">   # 进入函数&lt;strings_not_equal&gt;，出来后函数返回值放在v类寄存器</span><br><span class="line">   </span><br><span class="line">   0x00400d90 &lt;+36&gt;:	nop</span><br><span class="line">   0x00400d94 &lt;+40&gt;:	beqz	v0,0x400da4 &lt;phase_1+56&gt;</span><br><span class="line">   # v0 == 0就跳到+56行，跳过了下面+48行的炸弹，故这里要求&lt;strings_not_equal&gt;返回值为0，即不能&quot;strings_not_equal&quot;， 两个字符串要相等，即输入串和常量串&quot;Let&apos;s begin now!&quot;相等，的解。</span><br><span class="line">   </span><br><span class="line">   0x00400d98 &lt;+44&gt;:	nop</span><br><span class="line">   0x00400d9c &lt;+48&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400da0 &lt;+52&gt;:	nop</span><br><span class="line">   # 引爆炸弹</span><br><span class="line">   </span><br><span class="line">   0x00400da4 &lt;+56&gt;:	move	sp,s8</span><br><span class="line">   0x00400da8 &lt;+60&gt;:	lw	ra,28(sp)</span><br><span class="line">   0x00400dac &lt;+64&gt;:	lw	s8,24(sp)</span><br><span class="line">   0x00400db0 &lt;+68&gt;:	addiu	sp,sp,32</span><br><span class="line">   0x00400db4 &lt;+72&gt;:	jr	ra</span><br><span class="line">   0x00400db8 &lt;+76&gt;:	nop</span><br><span class="line">   # 还原栈现场，返回</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line">输入Let&apos;s begin now!</span><br></pre></td></tr></table></figure><h3 id="Phase-2"><a href="#Phase-2" class="headerlink" title="Phase_2"></a>Phase_2</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_2:</span><br><span class="line">   0x00400dbc &lt;+0&gt;:	addiu	sp,sp,-64       </span><br><span class="line">   0x00400dc0 &lt;+4&gt;:	sw	ra,60(sp)          </span><br><span class="line">   0x00400dc4 &lt;+8&gt;:	sw	s8,56(sp)           </span><br><span class="line">   0x00400dc8 &lt;+12&gt;:	move	s8,sp       </span><br><span class="line">   0x00400dcc &lt;+16&gt;:	lui	gp,0x42         </span><br><span class="line">   0x00400dd0 &lt;+20&gt;:	addiu	gp,gp,-20080  </span><br><span class="line">   0x00400dd4 &lt;+24&gt;:	sw	gp,16(sp)         </span><br><span class="line">   0x00400dd8 &lt;+28&gt;:	sw	a0,64(s8)         </span><br><span class="line">   0x00400ddc &lt;+32&gt;:	addiu	v0,s8,28      </span><br><span class="line">   0x00400de0 &lt;+36&gt;:	lw	a0,64(s8)        </span><br><span class="line">   0x00400de4 &lt;+40&gt;:	move	a1,v0         </span><br><span class="line">   0x00400de8 &lt;+44&gt;:	jal	0x401ba8 &lt;read_six_numbers&gt;  </span><br><span class="line">   # 压栈、读入6个数，存到28(s8)、32(s8)、36(s8)、40(s8)、44(s8)、48(s8)</span><br><span class="line">   </span><br><span class="line">   0x00400dec &lt;+48&gt;:	nop</span><br><span class="line">   0x00400df0 &lt;+52&gt;:	lw	gp,16(s8)        </span><br><span class="line">   0x00400df4 &lt;+56&gt;:	lw	v1,28(s8)         # 将v1 = 输入的六个数第1个</span><br><span class="line">   0x00400df8 &lt;+60&gt;:	li	v0,1              # 将v0 = 1</span><br><span class="line">   0x00400dfc &lt;+64&gt;:	beq	v1,v0,0x400e10 &lt;phase_2+84&gt; # 判断v1=v0=1，满足则跳+84行</span><br><span class="line">   0x00400e00 &lt;+68&gt;:	nop</span><br><span class="line">   0x00400e04 &lt;+72&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400e08 &lt;+76&gt;:	nop</span><br><span class="line">   0x00400e0c &lt;+80&gt;:	lw	gp,16(s8)</span><br><span class="line">   # 要求第一个参数为1</span><br><span class="line">   </span><br><span class="line">   0x00400e10 &lt;+84&gt;:	li	v0,1              # 将v0 = 1</span><br><span class="line">   0x00400e14 &lt;+88&gt;:	sw	v0,24(s8)         # 将24(s8) = v0 = 1</span><br><span class="line">   0x00400e18 &lt;+92&gt;:	b	0x400ea8 &lt;phase_2+236&gt; # 跳到+236行</span><br><span class="line">   0x00400e1c &lt;+96&gt;:	nop</span><br><span class="line">   # 令24(s8) = 1，进入+236行</span><br><span class="line">   </span><br><span class="line">   0x00400e20 &lt;+100&gt;:	lw	v0,24(s8)         # v0 = 24(s8)</span><br><span class="line">   0x00400e24 &lt;+104&gt;:	nop</span><br><span class="line">   0x00400e28 &lt;+108&gt;:	addiu	v0,v0,-1      # v0 -= 1</span><br><span class="line">   0x00400e2c &lt;+112&gt;:	sll	v0,v0,0x2         # v0 *= 4</span><br><span class="line">   0x00400e30 &lt;+116&gt;:	addiu	v1,s8,24      # v1 = s8+24，是一个地址</span><br><span class="line">   0x00400e34 &lt;+120&gt;:	addu	v0,v1,v0      # v0 += v1，即s8+24的地址向后偏移24(s8)个</span><br><span class="line">   0x00400e38 &lt;+124&gt;:	lw	a0,4(v0)          # 参数寄存器，a0 = 4(v0)</span><br><span class="line">   # 总结上面几句就是从s8+28向后取第24(s8)个变量，即num[i]，num是输入的六个数的数组</span><br><span class="line">   0x00400e3c &lt;+128&gt;:	li	v1,12             # v1 = 12</span><br><span class="line">   0x00400e40 &lt;+132&gt;:	lw	v0,24(s8)         # v0 = 24(s8)</span><br><span class="line">   0x00400e44 &lt;+136&gt;:	nop</span><br><span class="line">   0x00400e48 &lt;+140&gt;:	subu	v0,v1,v0      # v0=v1-v0=12-24(s8)</span><br><span class="line">   0x00400e4c &lt;+144&gt;:	lw	v1,-32660(gp)     </span><br><span class="line">   # 又出现了奇怪的常数，-32660(gp)，还是对全局指针的常数，反编译代码难看出什么，可以gdb一下，发现是现在0($v1) 为学号的第一位， 相应的4($v1)...一直到44($v1)。</span><br><span class="line">   # 当然也可以看汇编源码，发现上一行是&quot;lw $3,%got(ID_num)($28)&quot;一目了然了。</span><br><span class="line">   0x00400e50 &lt;+148&gt;:	sll	v0,v0,0x2         # v0 *= 4, 第一次的时候v0 = (12-1)*4，第二次是(12-2)*4=40</span><br><span class="line">   0x00400e54 &lt;+152&gt;:	addu	v0,v1,v0      # v0 = 学号第一位的地址+v0这个偏移量，即学号的从后数的第24(s8)位的地址</span><br><span class="line">   0x00400e58 &lt;+156&gt;:	lw	v0,0(v0)          # 将 v0 = 学号的从后数的第24(s8)位的内容</span><br><span class="line">   0x00400e5c &lt;+160&gt;:	nop </span><br><span class="line">   0x00400e60 &lt;+164&gt;:	mult	a0,v0         # 将lo,hi = a0*v0 = a0*学号的从后数的第24(s8)位，其中a0是</span><br><span class="line">   0x00400e64 &lt;+168&gt;:	mflo	a0            # 将a0 = lo = 乘法结果</span><br><span class="line">   0x00400e68 &lt;+172&gt;:	lw	v0,24(s8)         # v0 = 24(s8)</span><br><span class="line">   0x00400e6c &lt;+176&gt;:	nop</span><br><span class="line">   0x00400e70 &lt;+180&gt;:	sll	v0,v0,0x2         # v0 *= 2</span><br><span class="line">   0x00400e74 &lt;+184&gt;:	addiu	v1,s8,24      # v1 = s8+24，是一个地址</span><br><span class="line">   0x00400e78 &lt;+188&gt;:	addu	v0,v1,v0      # v0 = s8+24 + 24(s8)，还是一个地址</span><br><span class="line">   0x00400e7c &lt;+192&gt;:	lw	v0,4(v0)          </span><br><span class="line">   # 即v0 = 28(s8)后的第24(s8)个变量</span><br><span class="line">   0x00400e80 &lt;+196&gt;:	nop</span><br><span class="line">   0x00400e84 &lt;+200&gt;:	beq	a0,v0,0x400e98 &lt;phase_2+220&gt;  # 若a0=原a0*学号的从后数的第24(s8)位的内容 == v0=输入六个参数的第24(s8)个 则跳转+220行，不会爆炸</span><br><span class="line">   # 这里的原a0?????????????????????????</span><br><span class="line">   0x00400e88 &lt;+204&gt;:	nop</span><br><span class="line">   0x00400e8c &lt;+208&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400e90 &lt;+212&gt;:	nop</span><br><span class="line">   0x00400e94 &lt;+216&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00400e98 &lt;+220&gt;:	lw	v0,24(s8)        </span><br><span class="line">   0x00400e9c &lt;+224&gt;:	nop</span><br><span class="line">   0x00400ea0 &lt;+228&gt;:	addiu	v0,v0,1      </span><br><span class="line">   0x00400ea4 &lt;+232&gt;:	sw	v0,24(s8)        </span><br><span class="line">   0x00400ea8 &lt;+236&gt;:	lw	v0,24(s8)        </span><br><span class="line">   # v0 = ++ 24(s8)的意思</span><br><span class="line">   0x00400eac &lt;+240&gt;:	nop</span><br><span class="line">   0x00400eb0 &lt;+244&gt;:	slti	v0,v0,6                   # v0=(v0&lt;6)</span><br><span class="line">   0x00400eb4 &lt;+248&gt;:	bnez	v0,0x400e20 &lt;phase_2+100&gt; # v0!=0，即满足上式，进入+100行</span><br><span class="line">   # 循环结构, 24(s8) 从0~5，执行6次</span><br><span class="line">   </span><br><span class="line">   0x00400eb8 &lt;+252&gt;:	nop</span><br><span class="line">   0x00400ebc &lt;+256&gt;:	move	sp,s8</span><br><span class="line">   0x00400ec0 &lt;+260&gt;:	lw	ra,60(sp)</span><br><span class="line">   0x00400ec4 &lt;+264&gt;:	lw	s8,56(sp)</span><br><span class="line">   0x00400ec8 &lt;+268&gt;:	addiu	sp,sp,64</span><br><span class="line">   0x00400ecc &lt;+272&gt;:	jr	ra</span><br><span class="line">   0x00400ed0 &lt;+276&gt;:	nop</span><br><span class="line">   # 收栈，还原现场，返回</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line">输入：%d %d %d %d %d %d</span><br><span class="line">1 学号倒数第1位*输入数字的第1个 学号倒数第2位*输入数字的第2个 学号倒数第3位*输入数字的第3个 学号倒数第4位输入数字的第4个 学号倒数第5位输入数字的第5个</span><br><span class="line">我的答案：1 0 0 0 0 0</span><br></pre></td></tr></table></figure><h3 id="phase-3"><a href="#phase-3" class="headerlink" title="phase_3"></a>phase_3</h3><p>从phase_3开始就注释就是拆弹现场的迷la乱ji笔记，没有精修了。</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_3:</span><br><span class="line">   0x00400ed4 &lt;+0&gt;:	addiu	sp,sp,-56</span><br><span class="line">   0x00400ed8 &lt;+4&gt;:	sw	ra,52(sp)</span><br><span class="line">   0x00400edc &lt;+8&gt;:	sw	s8,48(sp)</span><br><span class="line">   0x00400ee0 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x00400ee4 &lt;+16&gt;:	lui	gp,0x42</span><br><span class="line">   0x00400ee8 &lt;+20&gt;:	addiu	gp,gp,-20080</span><br><span class="line">   0x00400eec &lt;+24&gt;:	sw	gp,24(sp)</span><br><span class="line">   0x00400ef0 &lt;+28&gt;:	sw	a0,56(s8)</span><br><span class="line">   0x00400ef4 &lt;+32&gt;:	lw	a0,56(s8)</span><br><span class="line">   0x00400ef8 &lt;+36&gt;:	lui	v0,0x40</span><br><span class="line">   0x00400efc &lt;+40&gt;:	addiu	a1,v0,10112</span><br><span class="line">   0x00400f00 &lt;+44&gt;:	addiu	v1,s8,44</span><br><span class="line">   0x00400f04 &lt;+48&gt;:	addiu	v0,s8,40</span><br><span class="line">   0x00400f08 &lt;+52&gt;:	addiu	a2,s8,36</span><br><span class="line">   0x00400f0c &lt;+56&gt;:	sw	a2,16(sp)</span><br><span class="line">   0x00400f10 &lt;+60&gt;:	move	a2,v1</span><br><span class="line">   0x00400f14 &lt;+64&gt;:	move	a3,v0</span><br><span class="line">   0x00400f18 &lt;+68&gt;:	lw	v0,-32636(gp)      # 看到熟悉的-3xxxx(gp)</span><br><span class="line">   0x00400f1c &lt;+72&gt;:	nop</span><br><span class="line">   0x00400f20 &lt;+76&gt;:	move	t9,v0         # 把v0放到t9</span><br><span class="line">   0x00400f24 &lt;+80&gt;:	jalr	t9            # 跳转到t9去</span><br><span class="line">   0x00400f28 &lt;+84&gt;:	nop                   # 然后从t9回来后，v0=输入参数的个数</span><br><span class="line">   0x00400f2c &lt;+88&gt;:	lw	gp,24(s8)          # gdb调试了一下 x /12 $s8 才发现我输入的&quot;555555&quot;，也就说是在44(s8)是我输入的第一个数字</span><br><span class="line">    0x00400f30 &lt;+92&gt;:	slti	v0,v0,3      # v0=(v0&lt;3) 然后就会爆炸，就是输入的数字少于3个会爆炸</span><br><span class="line">   0x00400f34 &lt;+96&gt;:	beqz	v0,0x400f48 &lt;phase_3+116&gt;  # v0==0就到+116行</span><br><span class="line">   0x00400f38 &lt;+100&gt;:	nop</span><br><span class="line">   0x00400f3c &lt;+104&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400f40 &lt;+108&gt;:	nop</span><br><span class="line">   0x00400f44 &lt;+112&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00400f48 &lt;+116&gt;:	lw	v0,44(s8)        # 把我输入的第一个数字放到v0 </span><br><span class="line">   0x00400f4c &lt;+120&gt;:	nop</span><br><span class="line">   0x00400f50 &lt;+124&gt;:	sltiu	v1,v0,8      # v1=(输入的第一个数字&lt;8)</span><br><span class="line">   0x00400f54 &lt;+128&gt;:	beqz	v1,0x401190 &lt;phase_3+700&gt; # 输入的第一个数&gt;=8会跳到+700行，不用往下看了，是爆炸，也就是说输入的第一个数字要小于8</span><br><span class="line">   0x00400f58 &lt;+132&gt;:	nop</span><br><span class="line">   0x00400f5c &lt;+136&gt;:	sll	v1,v0,0x2        # v1 = 输入的第一个数字*4</span><br><span class="line">   0x00400f60 &lt;+140&gt;:	lui	v0,0x40          # v0 = 64的高16位 = 64*65536 = 4194304</span><br><span class="line">   0x00400f64 &lt;+144&gt;:	addiu	v0,v0,10124  # v0 = 4194304+10124 = 4204428</span><br><span class="line">   0x00400f68 &lt;+148&gt;:	addu	v0,v1,v0     # v0 = 输入的第一个数字*4 + 4204428</span><br><span class="line">   0x00400f6c &lt;+152&gt;:	lw	v0,0(v0)         # v0 = v0地址上的数字，应该是一个子程序地址，输入的第一个数是1的时候为4198336，是2的手为4198404</span><br><span class="line">   0x00400f70 &lt;+156&gt;:	nop</span><br><span class="line">   0x00400f74 &lt;+160&gt;:	jr	v0               # 进入v0这个子程序，如果输入的第一个数是1则到+236行，为2到+304行，为3时候到+372行，为4时候到+436行，为5时到+504行，为6时到+572行，为7时到+632行，为0的时候直接顺着下去到+168</span><br><span class="line">   0x00400f78 &lt;+164&gt;:	nop</span><br><span class="line">   0x00400f7c &lt;+168&gt;:	li	v0,113           </span><br><span class="line">   0x00400f80 &lt;+172&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00400f84 &lt;+176&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x00400f88 &lt;+180&gt;:	nop</span><br><span class="line">   0x00400f8c &lt;+184&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x00400f90 &lt;+188&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x00400f94 &lt;+192&gt;:	nop</span><br><span class="line">   0x00400f98 &lt;+196&gt;:	mult	v1,v0</span><br><span class="line">   0x00400f9c &lt;+200&gt;:	mflo	v1</span><br><span class="line">   0x00400fa0 &lt;+204&gt;:	li	v0,777</span><br><span class="line">   0x00400fa4 &lt;+208&gt;:	beq	v1,v0,0x4011ac &lt;phase_3+728&gt; # 要学号第12位*输入的第二个数字去掉首位 == 777</span><br><span class="line">   0x00400fa8 &lt;+212&gt;:	nop</span><br><span class="line">   0x00400fac &lt;+216&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400fb0 &lt;+220&gt;:	nop</span><br><span class="line">   0x00400fb4 &lt;+224&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00400fb8 &lt;+228&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x00400fbc &lt;+232&gt;:	nop</span><br><span class="line">   0x00400fc0 &lt;+236&gt;:	li	v0,98                # 输入第一个数字为1时候到达的地方</span><br><span class="line">   0x00400fc4 &lt;+240&gt;:	sb	v0,32(s8)            </span><br><span class="line">   0x00400fc8 &lt;+244&gt;:	lw	v0,-32660(gp)        # -3xxxx(gp)一看到，应该要出现学号了</span><br><span class="line">   # 此时0($v0)是学号的第1位 以此类推 4($v0)</span><br><span class="line">   0x00400fcc &lt;+248&gt;:	nop</span><br><span class="line">   0x00400fd0 &lt;+252&gt;:	lw	v1,44(v0)   # v1 = 学号第12位</span><br><span class="line">   0x00400fd4 &lt;+256&gt;:	lw	v0,36(s8)   # v0 = 输入的第二个数字去掉首位</span><br><span class="line">   0x00400fd8 &lt;+260&gt;:	nop</span><br><span class="line">   0x00400fdc &lt;+264&gt;:	mult	v1,v0   </span><br><span class="line">   0x00400fe0 &lt;+268&gt;:	mflo	v1</span><br><span class="line">   0x00400fe4 &lt;+272&gt;:	li	v0,214  </span><br><span class="line">   0x00400fe8 &lt;+276&gt;:	beq	v1,v0,0x4011b8 &lt;phase_3+740&gt;  # 学号第12位*输入的第二个数字去掉首位 == 214 则跳到+720行，好的想都不用想了，我学号第12位是0，第一条路没了。</span><br><span class="line">   0x00400fec &lt;+280&gt;:	nop</span><br><span class="line">   0x00400ff0 &lt;+284&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00400ff4 &lt;+288&gt;:	nop</span><br><span class="line">   0x00400ff8 &lt;+292&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00400ffc &lt;+296&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x00401000 &lt;+300&gt;:	nop</span><br><span class="line">   0x00401004 &lt;+304&gt;:	li	v0,98                  # 第二条路</span><br><span class="line">   0x00401008 &lt;+308&gt;:	sb	v0,32(s8)              </span><br><span class="line">   0x0040100c &lt;+312&gt;:	lw	v0,-32660(gp)          # 依旧相似的重复</span><br><span class="line">   0x00401010 &lt;+316&gt;:	nop</span><br><span class="line">   0x00401014 &lt;+320&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x00401018 &lt;+324&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x0040101c &lt;+328&gt;:	nop</span><br><span class="line">   0x00401020 &lt;+332&gt;:	mult	v1,v0</span><br><span class="line">   0x00401024 &lt;+336&gt;:	mflo	v1</span><br><span class="line">   0x00401028 &lt;+340&gt;:	li	v0,755</span><br><span class="line">   0x0040102c &lt;+344&gt;:	beq	v1,v0,0x4011c4 &lt;phase_3+752&gt;  # 学号第12位*输入的第二个数字去掉首位 == 755 则跳到+752行，好的想都不用想了，我学号第12位是0，第二条路没了。</span><br><span class="line">   0x00401030 &lt;+348&gt;:	nop</span><br><span class="line">   0x00401034 &lt;+352&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401038 &lt;+356&gt;:	nop</span><br><span class="line">   0x0040103c &lt;+360&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00401040 &lt;+364&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x00401044 &lt;+368&gt;:	nop</span><br><span class="line">   0x00401048 &lt;+372&gt;:	li	v0,107            # 第三条路，熟悉的场tao景lu</span><br><span class="line">   0x0040104c &lt;+376&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00401050 &lt;+380&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x00401054 &lt;+384&gt;:	nop</span><br><span class="line">   0x00401058 &lt;+388&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x0040105c &lt;+392&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x00401060 &lt;+396&gt;:	nop</span><br><span class="line">   0x00401064 &lt;+400&gt;:	mult	v1,v0</span><br><span class="line">   0x00401068 &lt;+404&gt;:	mflo	v0</span><br><span class="line">   0x0040106c &lt;+408&gt;:	beqz	v0,0x4011d0 &lt;phase_3+764&gt;  # 学号第12位*输入的第二个数字去掉首位 == 0 则跳转到764行，咦我的学号满足啊，但先去看看第四五六七条路</span><br><span class="line">   0x00401070 &lt;+412&gt;:	nop</span><br><span class="line">   0x00401074 &lt;+416&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401078 &lt;+420&gt;:	nop</span><br><span class="line">   0x0040107c &lt;+424&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00401080 &lt;+428&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x00401084 &lt;+432&gt;:	nop</span><br><span class="line">   0x00401088 &lt;+436&gt;:	li	v0,111              # 第四条路</span><br><span class="line">   0x0040108c &lt;+440&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00401090 &lt;+444&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x00401094 &lt;+448&gt;:	nop</span><br><span class="line">   0x00401098 &lt;+452&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x0040109c &lt;+456&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x004010a0 &lt;+460&gt;:	nop</span><br><span class="line">   0x004010a4 &lt;+464&gt;:	mult	v1,v0</span><br><span class="line">   0x004010a8 &lt;+468&gt;:	mflo	v1</span><br><span class="line">   0x004010ac &lt;+472&gt;:	li	v0,228</span><br><span class="line">   0x004010b0 &lt;+476&gt;:	beq	v1,v0,0x4011dc &lt;phase_3+776&gt;  # 要等于228，不行</span><br><span class="line">   0x004010b4 &lt;+480&gt;:	nop</span><br><span class="line">   0x004010b8 &lt;+484&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x004010bc &lt;+488&gt;:	nop</span><br><span class="line">   0x004010c0 &lt;+492&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x004010c4 &lt;+496&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004010c8 &lt;+500&gt;:	nop</span><br><span class="line">   0x004010cc &lt;+504&gt;:	li	v0,116            # 第5条路</span><br><span class="line">   0x004010d0 &lt;+508&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x004010d4 &lt;+512&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x004010d8 &lt;+516&gt;:	nop</span><br><span class="line">   0x004010dc &lt;+520&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x004010e0 &lt;+524&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x004010e4 &lt;+528&gt;:	nop</span><br><span class="line">   0x004010e8 &lt;+532&gt;:	mult	v1,v0</span><br><span class="line">   0x004010ec &lt;+536&gt;:	mflo	v1</span><br><span class="line">   0x004010f0 &lt;+540&gt;:	li	v0,513</span><br><span class="line">   0x004010f4 &lt;+544&gt;:	beq	v1,v0,0x4011e8 &lt;phase_3+788&gt;  # 要等于513，不行</span><br><span class="line">   0x004010f8 &lt;+548&gt;:	nop</span><br><span class="line">   0x004010fc &lt;+552&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401100 &lt;+556&gt;:	nop</span><br><span class="line">   0x00401104 &lt;+560&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00401108 &lt;+564&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x0040110c &lt;+568&gt;:	nop</span><br><span class="line">   0x00401110 &lt;+572&gt;:	li	v0,118            # 第6条路</span><br><span class="line">   0x00401114 &lt;+576&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00401118 &lt;+580&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x0040111c &lt;+584&gt;:	nop</span><br><span class="line">   0x00401120 &lt;+588&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x00401124 &lt;+592&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x00401128 &lt;+596&gt;:	nop</span><br><span class="line">   0x0040112c &lt;+600&gt;:	mult	v1,v0</span><br><span class="line">   0x00401130 &lt;+604&gt;:	mflo	v1</span><br><span class="line">   0x00401134 &lt;+608&gt;:	li	v0,780</span><br><span class="line">   0x00401138 &lt;+612&gt;:	beq	v1,v0,0x40114c &lt;phase_3+632&gt; #要等于780，不行</span><br><span class="line">   0x0040113c &lt;+616&gt;:	nop</span><br><span class="line">   0x00401140 &lt;+620&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401144 &lt;+624&gt;:	nop</span><br><span class="line">   0x00401148 &lt;+628&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x0040114c &lt;+632&gt;:	li	v0,98              # 第7条路</span><br><span class="line">   0x00401150 &lt;+636&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00401154 &lt;+640&gt;:	lw	v0,-32660(gp)</span><br><span class="line">   0x00401158 &lt;+644&gt;:	nop</span><br><span class="line">   0x0040115c &lt;+648&gt;:	lw	v1,44(v0)</span><br><span class="line">   0x00401160 &lt;+652&gt;:	lw	v0,36(s8)</span><br><span class="line">   0x00401164 &lt;+656&gt;:	nop</span><br><span class="line">   0x00401168 &lt;+660&gt;:	mult	v1,v0</span><br><span class="line">   0x0040116c &lt;+664&gt;:	mflo	v1</span><br><span class="line">   0x00401170 &lt;+668&gt;:	li	v0,824</span><br><span class="line">   0x00401174 &lt;+672&gt;:	beq	v1,v0,0x4011f4 &lt;phase_3+800&gt;   # 要等于824，不行</span><br><span class="line">   0x00401178 &lt;+676&gt;:	nop</span><br><span class="line">   0x0040117c &lt;+680&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401180 &lt;+684&gt;:	nop</span><br><span class="line">   0x00401184 &lt;+688&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00401188 &lt;+692&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x0040118c &lt;+696&gt;:	nop</span><br><span class="line">   0x00401190 &lt;+700&gt;:	li	v0,120</span><br><span class="line">   0x00401194 &lt;+704&gt;:	sb	v0,32(s8)</span><br><span class="line">   0x00401198 &lt;+708&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x0040119c &lt;+712&gt;:	nop</span><br><span class="line">   0x004011a0 &lt;+716&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x004011a4 &lt;+720&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011a8 &lt;+724&gt;:	nop</span><br><span class="line">   0x004011ac &lt;+728&gt;:	nop</span><br><span class="line">   0x004011b0 &lt;+732&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011b4 &lt;+736&gt;:	nop</span><br><span class="line">   0x004011b8 &lt;+740&gt;:	nop</span><br><span class="line">   0x004011bc &lt;+744&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011c0 &lt;+748&gt;:	nop</span><br><span class="line">   0x004011c4 &lt;+752&gt;:	nop</span><br><span class="line">   0x004011c8 &lt;+756&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011cc &lt;+760&gt;:	nop</span><br><span class="line">   0x004011d0 &lt;+764&gt;:	nop                            # 第三条路的到点</span><br><span class="line">   0x004011d4 &lt;+768&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011d8 &lt;+772&gt;:	nop</span><br><span class="line">   0x004011dc &lt;+776&gt;:	nop</span><br><span class="line">   0x004011e0 &lt;+780&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011e4 &lt;+784&gt;:	nop</span><br><span class="line">   0x004011e8 &lt;+788&gt;:	nop</span><br><span class="line">   0x004011ec &lt;+792&gt;:	b	0x4011f8 &lt;phase_3+804&gt;</span><br><span class="line">   0x004011f0 &lt;+796&gt;:	nop</span><br><span class="line">   0x004011f4 &lt;+800&gt;:	nop</span><br><span class="line">    # 最终都会汇集到的地方</span><br><span class="line">   0x004011f8 &lt;+804&gt;:	lb	v0,40(s8)            # 追踪了一下40($s8)在从t9出来后就没变了  </span><br><span class="line">   0x004011fc &lt;+808&gt;:	lb	v1,32(s8)            # lb 读末八位进来</span><br><span class="line">   0x00401200 &lt;+812&gt;:	nop</span><br><span class="line">   0x00401204 &lt;+816&gt;:	beq	v1,v0,0x401218 &lt;phase_3+836&gt; </span><br><span class="line">   0x00401208 &lt;+820&gt;:	nop</span><br><span class="line">   0x0040120c &lt;+824&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401210 &lt;+828&gt;:	nop</span><br><span class="line">   0x00401214 &lt;+832&gt;:	lw	gp,24(s8)</span><br><span class="line">   0x00401218 &lt;+836&gt;:	move	sp,s8</span><br><span class="line">   0x0040121c &lt;+840&gt;:	lw	ra,52(sp)</span><br><span class="line">   0x00401220 &lt;+844&gt;:	lw	s8,48(sp)</span><br><span class="line">   0x00401224 &lt;+848&gt;:	addiu	sp,sp,56</span><br><span class="line">   0x00401228 &lt;+852&gt;:	jr	ra</span><br><span class="line">   0x0040122c &lt;+856&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line">输入%d %c %d</span><br><span class="line">第一个数字44($s8)，要小于8,代表了8个条件分支</span><br><span class="line">第二个参数40($s8)，是8个条件分支里会设置的最后比对ASCII相等</span><br><span class="line">第三个数字乘以学号最后一位乘起来去和8个条件分支的常数判等</span><br><span class="line"></span><br><span class="line">我的答案：</span><br><span class="line">3 k 任意一个数字</span><br></pre></td></tr></table></figure><p>恭喜完成Phase_3…</p><h3 id="Phase-4"><a href="#Phase-4" class="headerlink" title="Phase_4"></a>Phase_4</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_4:</span><br><span class="line">   0x004012bc &lt;+0&gt;:	addiu	sp,sp,-40</span><br><span class="line">   0x004012c0 &lt;+4&gt;:	sw	ra,36(sp)</span><br><span class="line">   0x004012c4 &lt;+8&gt;:	sw	s8,32(sp)</span><br><span class="line">   0x004012c8 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x004012cc &lt;+16&gt;:	lui	gp,0x42</span><br><span class="line">   0x004012d0 &lt;+20&gt;:	addiu	gp,gp,-20080</span><br><span class="line">   0x004012d4 &lt;+24&gt;:	sw	gp,16(sp)</span><br><span class="line">   0x004012d8 &lt;+28&gt;:	sw	a0,40(s8)</span><br><span class="line">   0x004012dc &lt;+32&gt;:	lw	v1,40(s8)</span><br><span class="line">   0x004012e0 &lt;+36&gt;:	lui	v0,0x40</span><br><span class="line">   0x004012e4 &lt;+40&gt;:	addiu	v0,v0,10156</span><br><span class="line">   0x004012e8 &lt;+44&gt;:	move	a0,v1</span><br><span class="line">   0x004012ec &lt;+48&gt;:	move	a1,v0</span><br><span class="line">   0x004012f0 &lt;+52&gt;:	addiu	v0,s8,24</span><br><span class="line">   0x004012f4 &lt;+56&gt;:	move	a2,v0</span><br><span class="line">   0x004012f8 &lt;+60&gt;:	lw	v0,-32636(gp)               </span><br><span class="line">   0x004012fc &lt;+64&gt;:	nop</span><br><span class="line">   0x00401300 &lt;+68&gt;:	move	t9,v0            # 让读入函数的返回值为v0，看下一行就知道了“jalr”，调用了系统的ddl</span><br><span class="line">   0x00401304 &lt;+72&gt;:	jalr	t9</span><br><span class="line">   0x00401308 &lt;+76&gt;:	nop</span><br><span class="line">   0x0040130c &lt;+80&gt;:	lw	gp,16(s8)            # 可以从这里开始，x /7d $s8发现是输入的那一个参数，即24($s8)</span><br><span class="line">   0x00401310 &lt;+84&gt;:	move	v1,v0                      # 令v1=v0=实际参数数目</span><br><span class="line">   0x00401314 &lt;+88&gt;:	li	v0,1                           # 规定的输入参数数目为v0=1</span><br><span class="line">   0x00401318 &lt;+92&gt;:	bne	v1,v0,0x401330 &lt;phase_4+116&gt;   # 判断输入参数为1个，不等的话就去+116行引爆炸弹吧</span><br><span class="line">   0x0040131c &lt;+96&gt;:	nop</span><br><span class="line">   0x00401320 &lt;+100&gt;:	lw	v0,24(s8)               # 把输入的那个参数读入到v0</span><br><span class="line">   0x00401324 &lt;+104&gt;:	nop</span><br><span class="line">   0x00401328 &lt;+108&gt;:	bgtz	v0,0x401340 &lt;phase_4+132&gt;  # 输入的那个参数大于0就跳到+132</span><br><span class="line">   0x0040132c &lt;+112&gt;:	nop</span><br><span class="line">   0x00401330 &lt;+116&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401334 &lt;+120&gt;:	nop</span><br><span class="line">   0x00401338 &lt;+124&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x0040133c &lt;+128&gt;:	nop</span><br><span class="line">   0x00401340 &lt;+132&gt;:	lw	v0,-32660(gp)                # 把学号第一位首&quot;地址&quot;放到v0</span><br><span class="line">   0x00401344 &lt;+136&gt;:	nop</span><br><span class="line">   0x00401348 &lt;+140&gt;:	lw	v0,44(v0)                    # 0是第一位首地址，44就是取第十二位学号到v0</span><br><span class="line">   0x0040134c &lt;+144&gt;:	nop</span><br><span class="line">   0x00401350 &lt;+148&gt;:	andi	v0,v0,0x1                # v0 &amp;= 0x1</span><br><span class="line">   0x00401354 &lt;+152&gt;:	andi	v0,v0,0xff               # v0 &amp;= 0xff (是255)</span><br><span class="line">   0x00401358 &lt;+156&gt;:	beqz	v0,0x40139c &lt;phase_4+224&gt; # 两次与运算之后等于0的话就去+224行，否则继续，我的学号最后一位是0，与上什么都是0，那就去+224行</span><br><span class="line">   0x0040135c &lt;+160&gt;:	nop</span><br><span class="line">   0x00401360 &lt;+164&gt;:	lw	v0,24(s8)</span><br><span class="line">   0x00401364 &lt;+168&gt;:	nop</span><br><span class="line">   0x00401368 &lt;+172&gt;:	move	a0,v0</span><br><span class="line">   0x0040136c &lt;+176&gt;:	jal	0x401230 &lt;func4&gt;</span><br><span class="line">   0x00401370 &lt;+180&gt;:	nop</span><br><span class="line">   0x00401374 &lt;+184&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401378 &lt;+188&gt;:	move	v1,v0</span><br><span class="line">   0x0040137c &lt;+192&gt;:	li	v0,8</span><br><span class="line">   0x00401380 &lt;+196&gt;:	beq	v1,v0,0x4013d0 &lt;phase_4+276&gt;</span><br><span class="line">   0x00401384 &lt;+200&gt;:	nop</span><br><span class="line">   0x00401388 &lt;+204&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x0040138c &lt;+208&gt;:	nop</span><br><span class="line">   0x00401390 &lt;+212&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401394 &lt;+216&gt;:	b	0x4013d0 &lt;phase_4+276&gt;</span><br><span class="line">   0x00401398 &lt;+220&gt;:	nop</span><br><span class="line">   0x0040139c &lt;+224&gt;:	lw	v0,24(s8)                 # 降落完毕，把输入的那个参数放到v0</span><br><span class="line">   0x004013a0 &lt;+228&gt;:	nop</span><br><span class="line">   0x004013a4 &lt;+232&gt;:	move	a0,v0                 # 把v0即输入的那个参数放到a0</span><br><span class="line">   0x004013a8 &lt;+236&gt;:	jal	0x401230 &lt;func4&gt;          # 进入函数func4</span><br><span class="line">   0x004013ac &lt;+240&gt;:	nop</span><br><span class="line">   0x004013b0 &lt;+244&gt;:	lw	gp,16(s8)                 # 从func4回来</span><br><span class="line">   0x004013b4 &lt;+248&gt;:	move	v1,v0                 # v1 = v0 = func4的返回值</span><br><span class="line">   0x004013b8 &lt;+252&gt;:	li	v0,13                     # v0 = 13</span><br><span class="line">   0x004013bc &lt;+256&gt;:	beq	v1,v0,0x4013d0 &lt;phase_4+276&gt; # v1 == v0的话，就去276完成该关卡，蛤？也就是说要func的返回值为13。。。行吧，去看情况②</span><br><span class="line">   0x004013c0 &lt;+260&gt;:	nop</span><br><span class="line">   0x004013c4 &lt;+264&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x004013c8 &lt;+268&gt;:	nop </span><br><span class="line">   0x004013cc &lt;+272&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x004013d0 &lt;+276&gt;:	move	sp,s8</span><br><span class="line">   0x004013d4 &lt;+280&gt;:	lw	ra,36(sp)</span><br><span class="line">   0x004013d8 &lt;+284&gt;:	lw	s8,32(sp)</span><br><span class="line">   0x004013dc &lt;+288&gt;:	addiu	sp,sp,40</span><br><span class="line">   0x004013e0 &lt;+292&gt;:	jr	ra</span><br><span class="line">   0x004013e4 &lt;+296&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><h4 id="引入func4"><a href="#引入func4" class="headerlink" title="引入func4"></a>引入func4</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function func4:      </span><br><span class="line">   0x00401230 &lt;+0&gt;:	addiu	sp,sp,-40</span><br><span class="line">   0x00401234 &lt;+4&gt;:	sw	ra,36(sp)</span><br><span class="line">   0x00401238 &lt;+8&gt;:	sw	s8,32(sp)</span><br><span class="line">   0x0040123c &lt;+12&gt;:	sw	s0,28(sp)</span><br><span class="line">   0x00401240 &lt;+16&gt;:	move	s8,sp    </span><br><span class="line">   0x00401244 &lt;+20&gt;:	sw	a0,40(s8)                # 把输入的那个参数存到40(s8)</span><br><span class="line">   0x00401248 &lt;+24&gt;:	lw	v0,40(s8)                # v0 = 40(s8) = 输入的那个参数</span><br><span class="line">   0x0040124c &lt;+28&gt;:	nop</span><br><span class="line">   0x00401250 &lt;+32&gt;:	slti	v0,v0,2              # v0 = (v0&lt;2)</span><br><span class="line">   0x00401254 &lt;+36&gt;:	bnez	v0,0x40129c &lt;func4+108&gt;  # 也就是说情况①输入参数小于2的话去+108行</span><br><span class="line">   0x00401258 &lt;+40&gt;:	nop</span><br><span class="line">   0x0040125c &lt;+44&gt;:	lw	v0,40(s8)                 # 好的，情况②，我们把v0=输入的参数</span><br><span class="line">   0x00401260 &lt;+48&gt;:	nop</span><br><span class="line">   0x00401264 &lt;+52&gt;:	addiu	v0,v0,-1              # v0 = 输入的参数-1</span><br><span class="line">   0x00401268 &lt;+56&gt;:	move	a0,v0                 # a0 = v0</span><br><span class="line">   0x0040126c &lt;+60&gt;:	jal	0x401230 &lt;func4&gt;          # 再进一次func4，蛤？递归吗？每次的传参都会-1，但相应的应该也会影响返回的值，我们往下看</span><br><span class="line">   0x00401270 &lt;+64&gt;:	nop</span><br><span class="line">   0x00401274 &lt;+68&gt;:	move	s0,v0                # 假设递归回来后, s0 = v0 = 返回值，想象s0寄存器的作用是啥呀？（我在干嘛？|_・)</span><br><span class="line">   0x00401278 &lt;+72&gt;:	lw	v0,40(s8)                # v0 = 40(s8) = 此时应该叫phase_4输入参数已经不合适了，要叫func4输入参数</span><br><span class="line">   0x0040127c &lt;+76&gt;:	nop</span><br><span class="line">   0x00401280 &lt;+80&gt;:	addiu	v0,v0,-2             # v0 -= 2</span><br><span class="line">   0x00401284 &lt;+84&gt;:	move	a0,v0                # a0 = v0</span><br><span class="line">   0x00401288 &lt;+88&gt;:	jal	0x401230 &lt;func4&gt;         # a0是参数寄存器，也就是说又递归去了。</span><br><span class="line">   0x0040128c &lt;+92&gt;:	nop</span><br><span class="line">   0x00401290 &lt;+96&gt;:	addu	v0,s0,v0             # 然后把两个返回值加起来，可以得到递归程序了：</span><br><span class="line">int func4(int a0)</span><br><span class="line">&#123;</span><br><span class="line">    if(a0&lt;2) return 1;</span><br><span class="line">    return func4(a0-1) + func4(a0-2);</span><br><span class="line">&#125;# 也就是求斐波那契数列的第a0项</span><br><span class="line"></span><br><span class="line">   0x00401294 &lt;+100&gt;:	b	0x4012a0 &lt;func4+112&gt;</span><br><span class="line">   0x00401298 &lt;+104&gt;:	nop</span><br><span class="line">   0x0040129c &lt;+108&gt;:	li	v0,1                      # 情况①：把v0=1，应该是作返回值？</span><br><span class="line">   0x004012a0 &lt;+112&gt;:	move	sp,s8                 # 下面就是收栈返回了，情况①可以返回phase_4，那就先回去看看吧，爆了再回来(#^.^#)</span><br><span class="line">   0x004012a4 &lt;+116&gt;:	lw	ra,36(sp)</span><br><span class="line">   0x004012a8 &lt;+120&gt;:	lw	s8,32(sp)</span><br><span class="line">   0x004012ac &lt;+124&gt;:	lw	s0,28(sp)</span><br><span class="line">   0x004012b0 &lt;+128&gt;:	addiu	sp,sp,40        </span><br><span class="line">   0x004012b4 &lt;+132&gt;:	jr	ra</span><br><span class="line">   0x004012b8 &lt;+136&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line"># func4是求斐波那契数列第n项(从0开始)，那么现在第几项=13，答案是固定的6</span><br><span class="line"></span><br><span class="line">读入 %d</span><br><span class="line">第四关答案：一个大于0的参数</span><br><span class="line">6</span><br></pre></td></tr></table></figure><h3 id="Phase-5"><a href="#Phase-5" class="headerlink" title="Phase_5"></a>Phase_5</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_5:</span><br><span class="line">   0x004013e8 &lt;+0&gt;:	addiu	sp,sp,-72</span><br><span class="line">   0x004013ec &lt;+4&gt;:	sw	ra,68(sp)</span><br><span class="line">   0x004013f0 &lt;+8&gt;:	sw	s8,64(sp)</span><br><span class="line">   0x004013f4 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x004013f8 &lt;+16&gt;:	sw	a0,72(s8)</span><br><span class="line">   0x004013fc &lt;+20&gt;:	lw	a0,72(s8)</span><br><span class="line">   0x00401400 &lt;+24&gt;:	jal	0x401c78 &lt;string_length&gt;  # 看到这里，似乎要读入一串东西，然后取长度什么的</span><br><span class="line">   0x00401404 &lt;+28&gt;:	nop</span><br><span class="line">   0x00401408 &lt;+32&gt;:	move	v1,v0                 # v1 = v0 = 函数返回值 = 输入字符串的长度</span><br><span class="line">   0x0040140c &lt;+36&gt;:	li	v0,6                      # v0 = 6</span><br><span class="line">   0x00401410 &lt;+40&gt;:	beq	v1,v0,0x401420 &lt;phase_5+56&gt; # 输入串长度=6的话就去+56行否则Boom</span><br><span class="line">   0x00401414 &lt;+44&gt;:	nop</span><br><span class="line">   0x00401418 &lt;+48&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x0040141c &lt;+52&gt;:	nop</span><br><span class="line">   0x00401420 &lt;+56&gt;:	sw	zero,24(s8)               # 24(s8) = 0</span><br><span class="line">   0x00401424 &lt;+60&gt;:	b	0x4014a8 &lt;phase_5+192&gt;    # 跳+192行</span><br><span class="line">   0x00401428 &lt;+64&gt;:	nop</span><br><span class="line">   0x0040142c &lt;+68&gt;:	lw	v0,24(s8)                 # 取v0 = 24(s8) = 循环计次量</span><br><span class="line">   0x00401430 &lt;+72&gt;:	lw	v1,24(s8)                 # 取v1 = 24(s8) = 循环计次量</span><br><span class="line">   0x00401434 &lt;+76&gt;:	lw	a0,72(s8)                 # 取a0 = 输出字符串的首位char的地址（x *($s8+72)可以看到）</span><br><span class="line">   0x00401438 &lt;+80&gt;:	nop</span><br><span class="line">   0x0040143c &lt;+84&gt;:	addu	v1,a0,v1              # v1 = str[0]+v1</span><br><span class="line">   0x00401440 &lt;+88&gt;:	lb	v1,0(v1)                  # 读入v1的值， 此时v1应该是地址，那么a0也是地址，上一步中v1就是下标偏移量，lb是读末八位进来，也就是v1=str[i]的ASCII码</span><br><span class="line">   # 上面几句应该就是第几次循环读下标为几的char</span><br><span class="line">   0x00401444 &lt;+92&gt;:	nop</span><br><span class="line">   0x00401448 &lt;+96&gt;:	andi	v1,v1,0xff            # v1 &amp;= 0xff  11111111</span><br><span class="line">   0x0040144c &lt;+100&gt;:	andi	v1,v1,0xf             # v1 &amp;= 0xf   00001111</span><br><span class="line">   # 上面两步就是消掉这个char前4位</span><br><span class="line">   0x00401450 &lt;+104&gt;:	sll	v0,v0,0x2                 # v0 *= 4</span><br><span class="line">   0x00401454 &lt;+108&gt;:	addiu	a0,s8,24              # a0 = s8+24是一个地址</span><br><span class="line">   0x00401458 &lt;+112&gt;:	addu	v0,a0,v0              # v0 = a0+v0循环计次量*4后的东西</span><br><span class="line">   0x0040145c &lt;+116&gt;:	sw	v1,12(v0)                 # 再令12(v0) = v1 = str[i]消掉前4位</span><br><span class="line">   0x00401460 &lt;+120&gt;:	lw	a0,24(s8)                 # a0 = 循环计次量</span><br><span class="line">   0x00401464 &lt;+124&gt;:	lw	v0,24(s8)                 # v0 = 循环计次量</span><br><span class="line">   0x00401468 &lt;+128&gt;:	nop</span><br><span class="line">   0x0040146c &lt;+132&gt;:	sll	v0,v0,0x2                 # a0 *= 4</span><br><span class="line">   0x00401470 &lt;+136&gt;:	addiu	v1,s8,24</span><br><span class="line">   0x00401474 &lt;+140&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x00401478 &lt;+144&gt;:	lw	v1,12(v0)</span><br><span class="line">   0x0040147c &lt;+148&gt;:	lui	v0,0x41</span><br><span class="line">   0x00401480 &lt;+152&gt;:	addiu	v0,v0,12524</span><br><span class="line">   0x00401484 &lt;+156&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x00401488 &lt;+160&gt;:	lb	v1,0(v0)</span><br><span class="line">   0x0040148c &lt;+164&gt;:	addiu	v0,s8,24</span><br><span class="line">   0x00401490 &lt;+168&gt;:	addu	v0,v0,a0</span><br><span class="line">   0x00401494 &lt;+172&gt;:	sb	v1,4(v0)</span><br><span class="line">   0x00401498 &lt;+176&gt;:	lw	v0,24(s8)</span><br><span class="line">   0x0040149c &lt;+180&gt;:	nop</span><br><span class="line">   0x004014a0 &lt;+184&gt;:	addiu	v0,v0,1</span><br><span class="line">   0x004014a4 &lt;+188&gt;:	sw	v0,24(s8)        </span><br><span class="line">   0x004014a8 &lt;+192&gt;:	lw	v0,24(s8)        # v0 = 24(s8)，就在这里打断点吧</span><br><span class="line">   0x004014ac &lt;+196&gt;:	nop</span><br><span class="line">   0x004014b0 &lt;+200&gt;:	slti	v0,v0,6      # v0 = (v0&lt;6)</span><br><span class="line">   0x004014b4 &lt;+204&gt;:	bnez	v0,0x40142c &lt;phase_5+68&gt;  # 小于6就去68行，猜测，上面v0&lt;6，所以应该是一个循环结构24(s8)是计次变量，循环6次，然后出来，先进去看循环结构</span><br><span class="line">   0x004014b8 &lt;+208&gt;:	nop</span><br><span class="line">   0x004014bc &lt;+212&gt;:	sb	zero,34(s8)                # 令34(s8)=0   </span><br><span class="line">   0x004014c0 &lt;+216&gt;:	addiu	v0,s8,28               # v0 = s8+28 ， 是一个地址</span><br><span class="line">   0x004014c4 &lt;+220&gt;:	move	a0,v0                  # a0</span><br><span class="line">   0x004014c8 &lt;+224&gt;:	lui	v0,0x40</span><br><span class="line">   0x004014cc &lt;+228&gt;:	addiu	a1,v0,10160</span><br><span class="line">   0x004014d0 &lt;+232&gt;:	jal	0x401cf8 &lt;strings_not_equal&gt;    # 进入判断生成字符串和常数字符串“giants”相等不，gdb试探，</span><br><span class="line">   0x004014d4 &lt;+236&gt;:	nop</span><br><span class="line">   0x004014d8 &lt;+240&gt;:	beqz	v0,0x4014e8 &lt;phase_5+256&gt;</span><br><span class="line">   0x004014dc &lt;+244&gt;:	nop</span><br><span class="line">   0x004014e0 &lt;+248&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x004014e4 &lt;+252&gt;:	nop</span><br><span class="line">   0x004014e8 &lt;+256&gt;:	move	sp,s8</span><br><span class="line">   0x004014ec &lt;+260&gt;:	lw	ra,68(sp)</span><br><span class="line">   0x004014f0 &lt;+264&gt;:	lw	s8,64(sp)</span><br><span class="line">   0x004014f4 &lt;+268&gt;:	addiu	sp,sp,72</span><br><span class="line">   0x004014f8 &lt;+272&gt;:	jr	ra</span><br><span class="line">   0x004014fc &lt;+276&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line">输入：%s</span><br><span class="line">长度为6，是一个密文</span><br><span class="line">原文giants，要求现在给出密文，映射表如下（小写应该也可以）</span><br><span class="line">A-&gt;s，B-&gt;r,C-&gt;v,D-&gt;e,E-&gt;a,F-&gt;w,G-&gt;h,H-&gt;o,I-&gt;b,J-&gt;p,K-&gt;n,L-&gt;u,M-&gt;t,N-&gt;f,O-&gt;g,P-&gt;i</span><br><span class="line">Q-&gt;s,R-&gt;r,S-&gt;v,T-&gt;e,U-&gt;a,V-&gt;w,W-&gt;h,X-&gt;o,Y-&gt;b,Z-&gt;p，循环咯</span><br><span class="line"></span><br><span class="line">故其中一个答案为：OPUKMQ</span><br></pre></td></tr></table></figure><h3 id="Phase-6"><a href="#Phase-6" class="headerlink" title="Phase_6"></a>Phase_6</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_6:</span><br><span class="line">   0x00401500 &lt;+0&gt;:	addiu	sp,sp,-96</span><br><span class="line">   0x00401504 &lt;+4&gt;:	sw	ra,92(sp)</span><br><span class="line">   0x00401508 &lt;+8&gt;:	sw	s8,88(sp)</span><br><span class="line">   0x0040150c &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x00401510 &lt;+16&gt;:	lui	gp,0x42</span><br><span class="line">   0x00401514 &lt;+20&gt;:	addiu	gp,gp,-20080</span><br><span class="line">   0x00401518 &lt;+24&gt;:	sw	gp,16(sp)</span><br><span class="line">   0x0040151c &lt;+28&gt;:	sw	a0,96(s8)</span><br><span class="line">   0x00401520 &lt;+32&gt;:	lui	v0,0x41</span><br><span class="line">   0x00401524 &lt;+36&gt;:	addiu	v0,v0,12592</span><br><span class="line">   0x00401528 &lt;+40&gt;:	sw	v0,32(s8)</span><br><span class="line">   0x0040152c &lt;+44&gt;:	addiu	v0,s8,36</span><br><span class="line">   0x00401530 &lt;+48&gt;:	lw	a0,96(s8)</span><br><span class="line">   0x00401534 &lt;+52&gt;:	move	a1,v0</span><br><span class="line">   0x00401538 &lt;+56&gt;:	jal	0x401ba8 &lt;read_six_numbers&gt;</span><br><span class="line">   0x0040153c &lt;+60&gt;:	nop</span><br><span class="line">   0x00401540 &lt;+64&gt;:	lw	gp,16(s8)            </span><br><span class="line">   0x00401544 &lt;+68&gt;:	sw	zero,28(s8)                # 令28(s8) = 0，猜测是循环计次变量</span><br><span class="line">   0x00401548 &lt;+72&gt;:	b	0x40163c &lt;phase_6+316&gt;     # 到+316行</span><br><span class="line">   0x0040154c &lt;+76&gt;:	nop</span><br><span class="line">   0x00401550 &lt;+80&gt;:	lw	v0,28(s8)                # v0 = i</span><br><span class="line">   0x00401554 &lt;+84&gt;:	nop</span><br><span class="line">   0x00401558 &lt;+88&gt;:	sll	v0,v0,0x2                # v0 *= 4</span><br><span class="line">   0x0040155c &lt;+92&gt;:	addiu	v1,s8,24             # v1 = s8+24 地址</span><br><span class="line">   0x00401560 &lt;+96&gt;:	addu	v0,v1,v0             </span><br><span class="line">   0x00401564 &lt;+100&gt;:	lw	v0,12(v0)                # 再算上这个12，本质从36开始取，取num[i]到v0</span><br><span class="line">   0x00401568 &lt;+104&gt;:	nop</span><br><span class="line">   0x0040156c &lt;+108&gt;:	slti	v0,v0,7              # v0=(num[i]&lt;7)</span><br><span class="line">   0x00401570 &lt;+112&gt;:	beqz	v0,0x40159c &lt;phase_6+156&gt; # 当num[i]&gt;=7就跳+156行爆炸，所以六个数都要小于7</span><br><span class="line">   0x00401574 &lt;+116&gt;:	nop</span><br><span class="line">   0x00401578 &lt;+120&gt;:	lw	v0,28(s8)                # v0 = 循环计次量i</span><br><span class="line">   0x0040157c &lt;+124&gt;:	nop</span><br><span class="line">   0x00401580 &lt;+128&gt;:	sll	v0,v0,0x2                # v0 *= 4</span><br><span class="line">   0x00401584 &lt;+132&gt;:	addiu	v1,s8,24</span><br><span class="line">   0x00401588 &lt;+136&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x0040158c &lt;+140&gt;:	lw	v0,12(v0)                # 再算上这个12，本质从36开始取，取num[i]到v0</span><br><span class="line">   0x00401590 &lt;+144&gt;:	nop</span><br><span class="line">   0x00401594 &lt;+148&gt;:	bgtz	v0,0x4015a8 &lt;phase_6+168&gt; # 判断是否大于0，大于就跳+168或者就下一行爆炸，到这里得到了六个数都是[1,6]间的数</span><br><span class="line">   0x00401598 &lt;+152&gt;:	nop</span><br><span class="line">   0x0040159c &lt;+156&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x004015a0 &lt;+160&gt;:	nop</span><br><span class="line">   0x004015a4 &lt;+164&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x004015a8 &lt;+168&gt;:	lw	v0,28(s8)                # v0 = 循环计次量i</span><br><span class="line">   0x004015ac &lt;+172&gt;:	nop</span><br><span class="line">   0x004015b0 &lt;+176&gt;:	addiu	v0,v0,1              # v0++</span><br><span class="line">   0x004015b4 &lt;+180&gt;:	sw	v0,24(s8)                # 令24(s8) = v0,好像也是计次变量，但从1开始</span><br><span class="line">   0x004015b8 &lt;+184&gt;:	b	0x401618 &lt;phase_6+280&gt;   # 跳</span><br><span class="line">   0x004015bc &lt;+188&gt;:	nop</span><br><span class="line">   0x004015c0 &lt;+192&gt;:	lw	v0,28(s8)                # v0 = 循环计次量i</span><br><span class="line">   0x004015c4 &lt;+196&gt;:	nop</span><br><span class="line">   0x004015c8 &lt;+200&gt;:	sll	v0,v0,0x2                # v0 *= 2</span><br><span class="line">   0x004015cc &lt;+204&gt;:	addiu	v1,s8,24</span><br><span class="line">   0x004015d0 &lt;+208&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x004015d4 &lt;+212&gt;:	lw	v1,12(v0)                # 上面几条就是取v1 = num[i]</span><br><span class="line">   0x004015d8 &lt;+216&gt;:	lw	v0,24(s8)                # v0 = 24(s8) 这是啥，上次的i，也就是i-1</span><br><span class="line">   0x004015dc &lt;+220&gt;:	nop</span><br><span class="line">   0x004015e0 &lt;+224&gt;:	sll	v0,v0,0x2                </span><br><span class="line">   0x004015e4 &lt;+228&gt;:	addiu	a0,s8,24</span><br><span class="line">   0x004015e8 &lt;+232&gt;:	addu	v0,a0,v0</span><br><span class="line">   0x004015ec &lt;+236&gt;:	lw	v0,12(v0)               # 取v0 = num[24(s8)]</span><br><span class="line">   0x004015f0 &lt;+240&gt;:	nop</span><br><span class="line">   0x004015f4 &lt;+244&gt;:	bne	v1,v0,0x401608 &lt;phase_6+264&gt;    # 两个不相等的时候跳过炸弹，现在的意思是相邻两个不相等蛤?</span><br><span class="line">   0x004015f8 &lt;+248&gt;:	nop</span><br><span class="line">   0x004015fc &lt;+252&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401600 &lt;+256&gt;:	nop</span><br><span class="line">   0x00401604 &lt;+260&gt;:	lw	gp,16(s8) </span><br><span class="line">   0x00401608 &lt;+264&gt;:	lw	v0,24(s8)               # v0 = 24(s8)</span><br><span class="line">   0x0040160c &lt;+268&gt;:	nop</span><br><span class="line">   0x00401610 &lt;+272&gt;:	addiu	v0,v0,1             # v0++</span><br><span class="line">   0x00401614 &lt;+276&gt;:	sw	v0,24(s8)               # 24(s8) = v0</span><br><span class="line">   0x00401618 &lt;+280&gt;:	lw	v0,24(s8)                #  蛤？好像是双循环，i=0-&gt;5,j=i+1-&gt;5，使得六个数互不相等</span><br><span class="line">   0x0040161c &lt;+284&gt;:	nop</span><br><span class="line">   0x00401620 &lt;+288&gt;:	slti	v0,v0,6              # v0 = (循环计次量i&lt;6)</span><br><span class="line">   0x00401624 &lt;+292&gt;:	bnez	v0,0x4015c0 &lt;phase_6+192&gt; # 若v0!=0就到+192行</span><br><span class="line">   0x00401628 &lt;+296&gt;:	nop</span><br><span class="line">   0x0040162c &lt;+300&gt;:	lw	v0,28(s8)</span><br><span class="line">   0x00401630 &lt;+304&gt;:	nop</span><br><span class="line">   0x00401634 &lt;+308&gt;:	addiu	v0,v0,1</span><br><span class="line">   0x00401638 &lt;+312&gt;:	sw	v0,28(s8)</span><br><span class="line">   0x0040163c &lt;+316&gt;:	lw	v0,28(s8)          # v0 = 28(s8) = 循环计次变量 </span><br><span class="line">   0x00401640 &lt;+320&gt;:	nop</span><br><span class="line">   0x00401644 &lt;+324&gt;:	slti	v0,v0,6        # 从0~5，共6次</span><br><span class="line">   0x00401648 &lt;+328&gt;:	bnez	v0,0x401550 &lt;phase_6+80&gt; # 进入循环体</span><br><span class="line">   0x0040164c &lt;+332&gt;:	nop</span><br><span class="line">   0x00401650 &lt;+336&gt;:	sw	zero,28(s8)                # 从上一个双重循环出来，28(s8)=0</span><br><span class="line">   0x00401654 &lt;+340&gt;:	b	0x4016f8 &lt;phase_6+504&gt;     # 跳到+504</span><br><span class="line">   0x00401658 &lt;+344&gt;:	nop</span><br><span class="line">   0x0040165c &lt;+348&gt;:	lui	v0,0x41                   # v0 = 0x41</span><br><span class="line">   0x00401660 &lt;+352&gt;:	addiu	v0,v0,12592           # v0 += 12592</span><br><span class="line">   0x00401664 &lt;+356&gt;:	sw	v0,32(s8)                 # 32(s8) = v0 此时发现32(s8)是node1的指针</span><br><span class="line">   0x00401668 &lt;+360&gt;:	li	v0,1                      # v0 = 1</span><br><span class="line">   0x0040166c &lt;+364&gt;:	sw	v0,24(s8)                 # 24(s8) = v0</span><br><span class="line">   0x00401670 &lt;+368&gt;:	b	0x40169c &lt;phase_6+412&gt;    # 进入，应该是第二重循环了</span><br><span class="line">   0x00401674 &lt;+372&gt;:	nop</span><br><span class="line">   </span><br><span class="line">   # ------------------------------这一部分是链表指针后移, 32(s8)是current指针</span><br><span class="line">   0x00401678 &lt;+376&gt;:	lw	v0,32(s8)                 # v0=32(s8) node1的地址(x *(*($s8+32)))</span><br><span class="line">   0x0040167c &lt;+380&gt;:	nop</span><br><span class="line">   0x00401680 &lt;+384&gt;:	lw	v0,8(v0)                  # v0=8(v0) node2的地址</span><br><span class="line">   0x00401684 &lt;+388&gt;:	nop</span><br><span class="line">   0x00401688 &lt;+392&gt;:	sw	v0,32(s8)                 # node1的地址指向node2</span><br><span class="line">    # ------------------------------这一部分是链表指针后移, 32(s8)是current指针</span><br><span class="line">    </span><br><span class="line">   0x0040168c &lt;+396&gt;:	lw	v0,24(s8)                 # v0 = 24(s8)</span><br><span class="line">   0x00401690 &lt;+400&gt;:	nop</span><br><span class="line">   0x00401694 &lt;+404&gt;:	addiu	v0,v0,1               # v0++了</span><br><span class="line">   0x00401698 &lt;+408&gt;:	sw	v0,24(s8)                 # 24(s8) = v0</span><br><span class="line">   0x0040169c &lt;+412&gt;:	lw	v0,28(s8)                 # v0 = 28(s8) 外层循环变量</span><br><span class="line">   0x004016a0 &lt;+416&gt;:	nop</span><br><span class="line">   0x004016a4 &lt;+420&gt;:	sll	v0,v0,0x2                 # v0 *= 4</span><br><span class="line">   0x004016a8 &lt;+424&gt;:	addiu	v1,s8,24</span><br><span class="line">   0x004016ac &lt;+428&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x004016b0 &lt;+432&gt;:	lw	v1,12(v0)                 # 意思是取36(s8)开始的即输入的第24(s8)个参数到v1</span><br><span class="line">   0x004016b4 &lt;+436&gt;:	lw	v0,24(s8)                 # 取v0 = 24(s8)</span><br><span class="line">   0x004016b8 &lt;+440&gt;:	nop</span><br><span class="line">   0x004016bc &lt;+444&gt;:	slt	v0,v0,v1                  # v0 = (num[j] &lt; num[i])</span><br><span class="line">   0x004016c0 &lt;+448&gt;:	bnez	v0,0x401678 &lt;phase_6+376&gt; # 上式满足的话进入+376行</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   0x004016c4 &lt;+452&gt;:	nop</span><br><span class="line">   0x004016c8 &lt;+456&gt;:	lw	v0,28(s8)                # v0 = 28(s8) , 外层循环</span><br><span class="line">   0x004016cc &lt;+460&gt;:	nop</span><br><span class="line">   0x004016d0 &lt;+464&gt;:	sll	v0,v0,0x2               # v0 *= 2</span><br><span class="line">   0x004016d4 &lt;+468&gt;:	addiu	v1,s8,24           </span><br><span class="line">   0x004016d8 &lt;+472&gt;:	addu	v0,v1,v0          </span><br><span class="line">   0x004016dc &lt;+476&gt;:	lw	v1,32(s8)               # 取v1 = node的地址</span><br><span class="line">   0x004016e0 &lt;+480&gt;:	nop</span><br><span class="line">   0x004016e4 &lt;+484&gt;:	sw	v1,36(v0)               # 60之后(s8) = node的地址</span><br><span class="line">   0x004016e8 &lt;+488&gt;:	lw	v0,28(s8)               # v0 = 28(s8) = i</span><br><span class="line">   0x004016ec &lt;+492&gt;:	nop</span><br><span class="line">   0x004016f0 &lt;+496&gt;:	addiu	v0,v0,1             # v0++</span><br><span class="line">   0x004016f4 &lt;+500&gt;:	sw	v0,28(s8)               # 保存</span><br><span class="line">   0x004016f8 &lt;+504&gt;:	lw	v0,28(s8)               # v0 = 28(s8)</span><br><span class="line">   0x004016fc &lt;+508&gt;:	nop</span><br><span class="line">   0x00401700 &lt;+512&gt;:	slti	v0,v0,6                   # 也是循环6次</span><br><span class="line">   0x00401704 &lt;+516&gt;:	bnez	v0,0x40165c &lt;phase_6+348&gt; # 进入循环体</span><br><span class="line">   0x00401708 &lt;+520&gt;:	nop</span><br><span class="line">   0x0040170c &lt;+524&gt;:	lw	v0,60(s8)                # 拿链表指针数组[0]到v0</span><br><span class="line">   0x00401710 &lt;+528&gt;:	nop</span><br><span class="line">   0x00401714 &lt;+532&gt;:	sw	v0,32(s8)                # 存到32(s8)</span><br><span class="line">   0x00401718 &lt;+536&gt;:	li	v0,1                     # v0=1</span><br><span class="line">   0x0040171c &lt;+540&gt;:	sw	v0,28(s8)                # 28(s8) = v0 = 1</span><br><span class="line">   0x00401720 &lt;+544&gt;:	b	0x40177c &lt;phase_6+636&gt;   # 又要进循环了</span><br><span class="line">   0x00401724 &lt;+548&gt;:	nop</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   0x00401728 &lt;+552&gt;:	lw	v0,28(s8)               # v0=i</span><br><span class="line">   0x0040172c &lt;+556&gt;:	nop</span><br><span class="line">   0x00401730 &lt;+560&gt;:	sll	v0,v0,0x2               # v0 *= 4 </span><br><span class="line">   0x00401734 &lt;+564&gt;:	addiu	v1,s8,24            </span><br><span class="line">   0x00401738 &lt;+568&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x0040173c &lt;+572&gt;:	lw	v1,36(v0)              # v1 = 链表指针数组[i]</span><br><span class="line">   0x00401740 &lt;+576&gt;:	lw	v0,32(s8)              # v0 = current</span><br><span class="line">   0x00401744 &lt;+580&gt;:	nop</span><br><span class="line">   0x00401748 &lt;+584&gt;:	sw	v1,8(v0)               # v0.next = v1 ------重点</span><br><span class="line">   0x0040174c &lt;+588&gt;:	lw	v0,28(s8)              # v0 = i</span><br><span class="line">   0x00401750 &lt;+592&gt;:	nop</span><br><span class="line">   0x00401754 &lt;+596&gt;:	sll	v0,v0,0x2               </span><br><span class="line">   0x00401758 &lt;+600&gt;:	addiu	v1,s8,24</span><br><span class="line">   0x0040175c &lt;+604&gt;:	addu	v0,v1,v0</span><br><span class="line">   0x00401760 &lt;+608&gt;:	lw	v0,36(v0)             # v0 = 链表指针数组[i]</span><br><span class="line">   0x00401764 &lt;+612&gt;:	nop</span><br><span class="line">   0x00401768 &lt;+616&gt;:	sw	v0,32(s8)             # 32(s8) = 链表指针数组[i]</span><br><span class="line">   0x0040176c &lt;+620&gt;:	lw	v0,28(s8)             # v0 = i</span><br><span class="line">   0x00401770 &lt;+624&gt;:	nop</span><br><span class="line">   0x00401774 &lt;+628&gt;:	addiu	v0,v0,1</span><br><span class="line">   0x00401778 &lt;+632&gt;:	sw	v0,28(s8)             # v0++存入</span><br><span class="line">   0x0040177c &lt;+636&gt;:	lw	v0,28(s8) </span><br><span class="line">   0x00401780 &lt;+640&gt;:	nop</span><br><span class="line">   0x00401784 &lt;+644&gt;:	slti	v0,v0,6</span><br><span class="line">   0x00401788 &lt;+648&gt;:	bnez	v0,0x401728 &lt;phase_6+552&gt; # 正式进循环</span><br><span class="line">   # 所以上循环作用就是，链表重排</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">   0x0040178c &lt;+652&gt;:	nop</span><br><span class="line">   0x00401790 &lt;+656&gt;:	lw	v0,32(s8)             # v0 = 32(s8) = 尾节点(最后留的指针)</span><br><span class="line">   0x00401794 &lt;+660&gt;:	nop</span><br><span class="line">   0x00401798 &lt;+664&gt;:	sw	zero,8(v0)            # 尾节点.next = 0</span><br><span class="line">   0x0040179c &lt;+668&gt;:	lw	v0,60(s8)             # v0 = 头节点</span><br><span class="line">   0x004017a0 &lt;+672&gt;:	nop</span><br><span class="line">   0x004017a4 &lt;+676&gt;:	sw	v0,32(s8)             # 32(s8) = 头节点指针</span><br><span class="line">   0x004017a8 &lt;+680&gt;:	sw	zero,28(s8)           # i = 0</span><br><span class="line">   0x004017ac &lt;+684&gt;:	b	0x401878 &lt;phase_6+888&gt; # 进+888行</span><br><span class="line">   0x004017b0 &lt;+688&gt;:	nop</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   0x004017b4 &lt;+692&gt;:	lw	v0,-32660(gp)      # v0为学号第一位</span><br><span class="line">   0x004017b8 &lt;+696&gt;:	nop</span><br><span class="line">   0x004017bc &lt;+700&gt;:	lw	v0,44(v0)             # v0=学号第12位</span><br><span class="line">   0x004017c0 &lt;+704&gt;:	nop</span><br><span class="line">   0x004017c4 &lt;+708&gt;:	andi	v0,v0,0x1      # 学号第十二位&amp;=1</span><br><span class="line">   0x004017c8 &lt;+712&gt;:	andi	v0,v0,0xff      # 学号第十二位&amp;=255</span><br><span class="line">   0x004017cc &lt;+716&gt;:	beqz	v0,0x401818 &lt;phase_6+792&gt;  # 我学号最后一位为0，然后进去了，应该是分支，不同分支不同要求</span><br><span class="line">   0x004017d0 &lt;+720&gt;:	nop</span><br><span class="line">   0x004017d4 &lt;+724&gt;:	lw	v0,32(s8)</span><br><span class="line">   0x004017d8 &lt;+728&gt;:	nop</span><br><span class="line">   0x004017dc &lt;+732&gt;:	lw	v1,0(v0)</span><br><span class="line">   0x004017e0 &lt;+736&gt;:	lw	v0,32(s8)</span><br><span class="line">   0x004017e4 &lt;+740&gt;:	nop</span><br><span class="line">   0x004017e8 &lt;+744&gt;:	lw	v0,8(v0)</span><br><span class="line">   0x004017ec &lt;+748&gt;:	nop</span><br><span class="line">   0x004017f0 &lt;+752&gt;:	lw	v0,0(v0)</span><br><span class="line">   0x004017f4 &lt;+756&gt;:	nop</span><br><span class="line">   0x004017f8 &lt;+760&gt;:	slt	v0,v1,v0</span><br><span class="line">   0x004017fc &lt;+764&gt;:	beqz	v0,0x401854 &lt;phase_6+852&gt;</span><br><span class="line">   0x00401800 &lt;+768&gt;:	nop</span><br><span class="line">   0x00401804 &lt;+772&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401808 &lt;+776&gt;:	nop</span><br><span class="line">   0x0040180c &lt;+780&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401810 &lt;+784&gt;:	b	0x401854 &lt;phase_6+852&gt;</span><br><span class="line">   0x00401814 &lt;+788&gt;:	nop</span><br><span class="line">   0x00401818 &lt;+792&gt;:	lw	v0,32(s8)                  # 取链表指针数组头</span><br><span class="line">   0x0040181c &lt;+796&gt;:	nop</span><br><span class="line">   0x00401820 &lt;+800&gt;:	lw	v1,0(v0)                   # v1 = 当前节点内容</span><br><span class="line">   0x00401824 &lt;+804&gt;:	lw	v0,32(s8)            </span><br><span class="line">   0x00401828 &lt;+808&gt;:	nop</span><br><span class="line">   0x0040182c &lt;+812&gt;:	lw	v0,8(v0)                   # v0 = 链表指针数组头.next的地址</span><br><span class="line">   0x00401830 &lt;+816&gt;:	nop</span><br><span class="line">   0x00401834 &lt;+820&gt;:	lw	v0,0(v0)                   # v0 = 链表指针数组头.next的内容了</span><br><span class="line">   0x00401838 &lt;+824&gt;:	nop</span><br><span class="line">   0x0040183c &lt;+828&gt;:	slt	v0,v0,v1                  # 要求 v0 &gt;= v1， 肉眼看感觉很费脑筋啊，display *(*($s8+32)) 和 display *(*(    (*($s8+32))+8   ))一下，第二个变量一直是725应该我的分支要求，现在就是看第一个怎么得来的</span><br><span class="line">   0x00401840 &lt;+832&gt;:	beqz	v0,0x401854 &lt;phase_6+852&gt;  # 这里爆炸</span><br><span class="line">   0x00401844 &lt;+836&gt;:	nop</span><br><span class="line">   0x00401848 &lt;+840&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x0040184c &lt;+844&gt;:	nop</span><br><span class="line">   0x00401850 &lt;+848&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401854 &lt;+852&gt;:	lw	v0,32(s8)                # v0 = 取链表指针数组头的地址</span><br><span class="line">   0x00401858 &lt;+856&gt;:	nop</span><br><span class="line">   0x0040185c &lt;+860&gt;:	lw	v0,8(v0)                 # v0 = 取链表指针数组头.next的地址</span><br><span class="line">   0x00401860 &lt;+864&gt;:	nop</span><br><span class="line">   0x00401864 &lt;+868&gt;:	sw	v0,32(s8)                # 存到32(s8)</span><br><span class="line">   0x00401868 &lt;+872&gt;:	lw	v0,28(s8)               </span><br><span class="line">   0x0040186c &lt;+876&gt;:	nop</span><br><span class="line">   0x00401870 &lt;+880&gt;:	addiu	v0,v0,1</span><br><span class="line">   0x00401874 &lt;+884&gt;:	sw	v0,28(s8)</span><br><span class="line">   0x00401878 &lt;+888&gt;:	lw	v0,28(s8)             # 又一个循环</span><br><span class="line">   0x0040187c &lt;+892&gt;:	nop</span><br><span class="line">   0x00401880 &lt;+896&gt;:	slti	v0,v0,5           # 这一次是从[0~5)，4次</span><br><span class="line">   0x00401884 &lt;+900&gt;:	bnez	v0,0x4017b4 &lt;phase_6+692&gt;</span><br><span class="line">   # 这一循环是判重排链表非递减序</span><br><span class="line">   </span><br><span class="line">   0x00401888 &lt;+904&gt;:	nop</span><br><span class="line">   0x0040188c &lt;+908&gt;:	move	sp,s8</span><br><span class="line">   0x00401890 &lt;+912&gt;:	lw	ra,92(sp)</span><br><span class="line">   0x00401894 &lt;+916&gt;:	lw	s8,88(sp)</span><br><span class="line">   0x00401898 &lt;+920&gt;:	addiu	sp,sp,96</span><br><span class="line">   0x0040189c &lt;+924&gt;:	jr	ra</span><br><span class="line">   0x004018a0 &lt;+928&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line">读入:%d %d %d %d %d %d</span><br><span class="line">要求链表重排</span><br><span class="line">链表节点node1~6 大小分别是 253,725,301,997,212,432</span><br><span class="line">最后的顺序是node5_node1_node3_node6_node2_node4</span><br><span class="line">要求重排成这个样子</span><br><span class="line">重排程序中，对于第i个数，1~6个数中有多少个小于num[i]，就取node几+1（因为执行了那么多次next()）</span><br><span class="line">那么第一个数应取node5，即执行4次next()，为5的时候有4个数小于5，第一个数取5</span><br><span class="line">剩下同理</span><br><span class="line">第六关答案为</span><br><span class="line">5 1 3 6 2 4</span><br></pre></td></tr></table></figure><h3 id="secret-phase"><a href="#secret-phase" class="headerlink" title="secret_phase"></a>secret_phase</h3><p>找到这个隐藏关卡，要在phase_defused里看到触发条件</p><h4 id="phase-defused探秘"><a href="#phase-defused探秘" class="headerlink" title="phase_defused探秘"></a>phase_defused探秘</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function phase_defused:</span><br><span class="line">   0x00402264 &lt;+0&gt;:	addiu	sp,sp,-120</span><br><span class="line">   0x00402268 &lt;+4&gt;:	sw	ra,116(sp)</span><br><span class="line">   0x0040226c &lt;+8&gt;:	sw	s8,112(sp)</span><br><span class="line">   0x00402270 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x00402274 &lt;+16&gt;:	lui	gp,0x42</span><br><span class="line">   0x00402278 &lt;+20&gt;:	addiu	gp,gp,-20080</span><br><span class="line">   0x0040227c &lt;+24&gt;:	sw	gp,16(sp)</span><br><span class="line">   0x00402280 &lt;+28&gt;:	lui	v0,0x41</span><br><span class="line">   0x00402284 &lt;+32&gt;:	lw	v1,12864(v0)</span><br><span class="line">   0x00402288 &lt;+36&gt;:	li	v0,6</span><br><span class="line">   0x0040228c &lt;+40&gt;:	bne	v1,v0,0x402374 &lt;phase_defused+272&gt; # 非第六关的完成，就直接跳272，否则继续</span><br><span class="line"> </span><br><span class="line">   0x00402290 &lt;+44&gt;:	nop</span><br><span class="line">   0x00402294 &lt;+48&gt;:	lw	v0,-32680(gp)</span><br><span class="line">   0x00402298 &lt;+52&gt;:	nop</span><br><span class="line">   0x0040229c &lt;+56&gt;:	addiu	a0,v0,240               # 读入指针打到第三关（0 120 240） </span><br><span class="line">   0x004022a0 &lt;+60&gt;:	lui	v0,0x40</span><br><span class="line">   0x004022a4 &lt;+64&gt;:	addiu	v1,v0,10408</span><br><span class="line">   0x004022a8 &lt;+68&gt;:	addiu	v0,s8,104</span><br><span class="line">   0x004022ac &lt;+72&gt;:	move	a1,v1</span><br><span class="line">   0x004022b0 &lt;+76&gt;:	move	a2,v0</span><br><span class="line">   0x004022b4 &lt;+80&gt;:	addiu	v0,s8,24</span><br><span class="line">   0x004022b8 &lt;+84&gt;:	move	a3,v0</span><br><span class="line">   0x004022bc &lt;+88&gt;:	lw	v0,-32636(gp)</span><br><span class="line">   0x004022c0 &lt;+92&gt;:	nop</span><br><span class="line">   0x004022c4 &lt;+96&gt;:	move	t9,v0</span><br><span class="line">   0x004022c8 &lt;+100&gt;:	jalr	t9</span><br><span class="line">   0x004022cc &lt;+104&gt;:	nop</span><br><span class="line">   0x004022d0 &lt;+108&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x004022d4 &lt;+112&gt;:	move	v1,v0</span><br><span class="line">   0x004022d8 &lt;+116&gt;:	li	v0,2</span><br><span class="line">   0x004022dc &lt;+120&gt;:	bne	v1,v0,0x402354 &lt;phase_defused+240&gt; # 判断读入了不等于两个参数，到+240行出函数</span><br><span class="line">   0x004022e0 &lt;+124&gt;:	nop</span><br><span class="line">   0x004022e4 &lt;+128&gt;:	addiu	v0,s8,24</span><br><span class="line">   0x004022e8 &lt;+132&gt;:	move	a0,v0</span><br><span class="line">   0x004022ec &lt;+136&gt;:	lui	v0,0x40</span><br><span class="line">   0x004022f0 &lt;+140&gt;:	addiu	a1,v0,10416</span><br><span class="line">   0x004022f4 &lt;+144&gt;:	jal	0x401cf8 &lt;strings_not_equal&gt;</span><br><span class="line">   0x004022f8 &lt;+148&gt;:	nop</span><br><span class="line">   0x004022fc &lt;+152&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00402300 &lt;+156&gt;:	bnez	v0,0x402354 &lt;phase_defused+240&gt; # v0 =  &lt;strings_not_equal&gt;返回值不等于0的话就跳过隐藏关，否则顺着下去+228就能进隐藏关</span><br><span class="line">   0x00402304 &lt;+160&gt;:	nop</span><br><span class="line">   0x00402308 &lt;+164&gt;:	lui	v0,0x40</span><br><span class="line">   0x0040230c &lt;+168&gt;:	addiu	a0,v0,10432</span><br><span class="line">   0x00402310 &lt;+172&gt;:	lw	v0,-32712(gp)</span><br><span class="line">   0x00402314 &lt;+176&gt;:	nop</span><br><span class="line">   0x00402318 &lt;+180&gt;:	move	t9,v0</span><br><span class="line">   0x0040231c &lt;+184&gt;:	jalr	t9</span><br><span class="line">   0x00402320 &lt;+188&gt;:	nop</span><br><span class="line">   0x00402324 &lt;+192&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00402328 &lt;+196&gt;:	lui	v0,0x40</span><br><span class="line">   0x0040232c &lt;+200&gt;:	addiu	a0,v0,10472</span><br><span class="line">   0x00402330 &lt;+204&gt;:	lw	v0,-32712(gp)</span><br><span class="line">   0x00402334 &lt;+208&gt;:	nop</span><br><span class="line">   0x00402338 &lt;+212&gt;:	move	t9,v0</span><br><span class="line">   0x0040233c &lt;+216&gt;:	jalr	t9</span><br><span class="line">   0x00402340 &lt;+220&gt;:	nop</span><br><span class="line">   0x00402344 &lt;+224&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00402348 &lt;+228&gt;:	jal	0x401990 &lt;secret_phase&gt; # 进入隐藏关</span><br><span class="line">   0x0040234c &lt;+232&gt;:	nop</span><br><span class="line">   0x00402350 &lt;+236&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00402354 &lt;+240&gt;:	lui	v0,0x40          # 出phase_defused咯</span><br><span class="line">   0x00402358 &lt;+244&gt;:	addiu	a0,v0,10528</span><br><span class="line">   0x0040235c &lt;+248&gt;:	lw	v0,-32712(gp)</span><br><span class="line">   0x00402360 &lt;+252&gt;:	nop</span><br><span class="line">   0x00402364 &lt;+256&gt;:	move	t9,v0</span><br><span class="line">   0x00402368 &lt;+260&gt;:	jalr	t9</span><br><span class="line">   0x0040236c &lt;+264&gt;:	nop</span><br><span class="line">   0x00402370 &lt;+268&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00402374 &lt;+272&gt;:	move	sp,s8</span><br><span class="line">   0x00402378 &lt;+276&gt;:	lw	ra,116(sp)</span><br><span class="line">   0x0040237c &lt;+280&gt;:	lw	s8,112(sp)</span><br><span class="line">   0x00402380 &lt;+284&gt;:	addiu	sp,sp,120</span><br><span class="line">   0x00402384 &lt;+288&gt;:	jr	ra</span><br><span class="line">   0x00402388 &lt;+292&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line"># 也就是说，在第6关完成时，会判断一下第4关是否读入了两个参数，找一下汇编源码常量，发现有&quot;%d %s&quot;没用过，还有常量$LC27&quot;austinpowers&quot;没用过</span><br><span class="line"></span><br><span class="line">第4关答案改为</span><br><span class="line">6 austinpowers</span><br><span class="line">在完成第6关时进入隐藏关卡</span><br></pre></td></tr></table></figure><h4 id="正式进入secret-phase"><a href="#正式进入secret-phase" class="headerlink" title="正式进入secret_phase"></a>正式进入secret_phase</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function secret_phase:</span><br><span class="line">   0x00401990 &lt;+0&gt;:	addiu	sp,sp,-40</span><br><span class="line">   0x00401994 &lt;+4&gt;:	sw	ra,36(sp)</span><br><span class="line">   0x00401998 &lt;+8&gt;:	sw	s8,32(sp)</span><br><span class="line">   0x0040199c &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x004019a0 &lt;+16&gt;:	lui	gp,0x42</span><br><span class="line">   0x004019a4 &lt;+20&gt;:	addiu	gp,gp,-20080</span><br><span class="line">   0x004019a8 &lt;+24&gt;:	sw	gp,16(sp)</span><br><span class="line">   0x004019ac &lt;+28&gt;:	jal	0x401fec &lt;read_line&gt;   # 读一行</span><br><span class="line">   0x004019b0 &lt;+32&gt;:	nop</span><br><span class="line">   0x004019b4 &lt;+36&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x004019b8 &lt;+40&gt;:	sw	v0,28(s8)             # 28(s8) = v0</span><br><span class="line">   0x004019bc &lt;+44&gt;:	lw	v0,28(s8)             # v0 = 28(s8)</span><br><span class="line">   0x004019c0 &lt;+48&gt;:	nop</span><br><span class="line">   0x004019c4 &lt;+52&gt;:	move	a0,v0             # a0 = v0</span><br><span class="line">   0x004019c8 &lt;+56&gt;:	move	a1,zero           # a1 = 0</span><br><span class="line">   0x004019cc &lt;+60&gt;:	li	a2,10                 # a2 = 10</span><br><span class="line">   0x004019d0 &lt;+64&gt;:	lw	v0,-32656(gp)         # v0 = strtol的地址</span><br><span class="line">   0x004019d4 &lt;+68&gt;:	nop</span><br><span class="line">   0x004019d8 &lt;+72&gt;:	move	t9,v0</span><br><span class="line">   0x004019dc &lt;+76&gt;:	jalr	t9</span><br><span class="line">   0x004019e0 &lt;+80&gt;:	nop</span><br><span class="line">   0x004019e4 &lt;+84&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x004019e8 &lt;+88&gt;:	sw	v0,24(s8)</span><br><span class="line">   0x004019ec &lt;+92&gt;:	lw	v0,24(s8)</span><br><span class="line">   0x004019f0 &lt;+96&gt;:	nop</span><br><span class="line">   0x004019f4 &lt;+100&gt;:	addiu	v0,v0,-1           </span><br><span class="line">   0x004019f8 &lt;+104&gt;:	sltiu	v0,v0,1001</span><br><span class="line">   0x004019fc &lt;+108&gt;:	bnez	v0,0x401a10 &lt;secret_phase+128&gt;</span><br><span class="line">   # strtol的返回值-1之后保证小于1001，因为是unsgined，故输入是小于等于1001大于0的一个数字字符串</span><br><span class="line">   0x00401a00 &lt;+112&gt;:	nop</span><br><span class="line">   0x00401a04 &lt;+116&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401a08 &lt;+120&gt;:	nop</span><br><span class="line">   0x00401a0c &lt;+124&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401a10 &lt;+128&gt;:	lui	v0,0x41              # v0 = 0x41</span><br><span class="line">   0x00401a14 &lt;+132&gt;:	addiu	a0,v0,12676      # a0 指向对象为n1</span><br><span class="line">   0x00401a18 &lt;+136&gt;:	lw	a1,24(s8)            # a1 = 输入字符串截取的前半部分数字</span><br><span class="line">   0x00401a1c &lt;+140&gt;:	jal	0x4018a4 &lt;fun7&gt;      # 进fun7</span><br><span class="line">   0x00401a20 &lt;+144&gt;:	nop</span><br><span class="line">   0x00401a24 &lt;+148&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401a28 &lt;+152&gt;:	move	v1,v0         </span><br><span class="line">   # 从fun7回来，将返回值放到v1</span><br><span class="line">   0x00401a2c &lt;+156&gt;:	li	v0,7</span><br><span class="line">   0x00401a30 &lt;+160&gt;:	beq	v1,v0,0x401a44 &lt;secret_phase+180&gt; # 现在就是v1要==7的意思</span><br><span class="line">   0x00401a34 &lt;+164&gt;:	nop</span><br><span class="line">   0x00401a38 &lt;+168&gt;:	jal	0x4021f0 &lt;explode_bomb&gt;</span><br><span class="line">   0x00401a3c &lt;+172&gt;:	nop</span><br><span class="line">   0x00401a40 &lt;+176&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401a44 &lt;+180&gt;:	lui	v0,0x40</span><br><span class="line">   0x00401a48 &lt;+184&gt;:	addiu	a0,v0,10168</span><br><span class="line">   0x00401a4c &lt;+188&gt;:	lw	v0,-32712(gp)</span><br><span class="line">   0x00401a50 &lt;+192&gt;:	nop</span><br><span class="line">   0x00401a54 &lt;+196&gt;:	move	t9,v0</span><br><span class="line">   0x00401a58 &lt;+200&gt;:	jalr	t9</span><br><span class="line">   0x00401a5c &lt;+204&gt;:	nop</span><br><span class="line">   0x00401a60 &lt;+208&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401a64 &lt;+212&gt;:	jal	0x402264 &lt;phase_defused&gt;</span><br><span class="line">   0x00401a68 &lt;+216&gt;:	nop</span><br><span class="line">   0x00401a6c &lt;+220&gt;:	lw	gp,16(s8)</span><br><span class="line">   0x00401a70 &lt;+224&gt;:	move	sp,s8</span><br><span class="line">   0x00401a74 &lt;+228&gt;:	lw	ra,36(sp)</span><br><span class="line">   0x00401a78 &lt;+232&gt;:	lw	s8,32(sp)</span><br><span class="line">   0x00401a7c &lt;+236&gt;:	addiu	sp,sp,40</span><br><span class="line">   0x00401a80 &lt;+240&gt;:	jr	ra</span><br><span class="line">   0x00401a84 &lt;+244&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br></pre></td></tr></table></figure><h4 id="引入fun7"><a href="#引入fun7" class="headerlink" title="引入fun7"></a>引入fun7</h4><p>看看什么时候返回值为7</p><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">Dump of assembler code for function fun7:</span><br><span class="line">   0x004018a4 &lt;+0&gt;:	addiu	sp,sp,-32</span><br><span class="line">   0x004018a8 &lt;+4&gt;:	sw	ra,28(sp)</span><br><span class="line">   0x004018ac &lt;+8&gt;:	sw	s8,24(sp)</span><br><span class="line">   0x004018b0 &lt;+12&gt;:	move	s8,sp</span><br><span class="line">   0x004018b4 &lt;+16&gt;:	sw	a0,32(s8)</span><br><span class="line">   0x004018b8 &lt;+20&gt;:	sw	a1,36(s8)   # 36(s8) = a1 传参</span><br><span class="line">   0x004018bc &lt;+24&gt;:	lw	v0,32(s8)   # v0 = 32(s8) = n1对象</span><br><span class="line">   0x004018c0 &lt;+28&gt;:	nop</span><br><span class="line">   0x004018c4 &lt;+32&gt;:	bnez	v0,0x4018d8 &lt;fun7+52&gt; # v0 != null才跳+52</span><br><span class="line">   0x004018c8 &lt;+36&gt;:	nop</span><br><span class="line">   0x004018cc &lt;+40&gt;:	li	v0,-1               # 返回值v0 = -1</span><br><span class="line">   0x004018d0 &lt;+44&gt;:	b	0x401978 &lt;fun7+212&gt; # 跳+212行，212行是return</span><br><span class="line">   # 这里的意思是若v0==null就返回-1</span><br><span class="line">   </span><br><span class="line">   0x004018d4 &lt;+48&gt;:	nop</span><br><span class="line">   0x004018d8 &lt;+52&gt;:	lw	v0,32(s8)     # v0 = 32(s8) = n1对象</span><br><span class="line">   0x004018dc &lt;+56&gt;:	nop</span><br><span class="line">   0x004018e0 &lt;+60&gt;:	lw	v1,0(v0)      # v1 = v0的第一个成员变量</span><br><span class="line">   0x004018e4 &lt;+64&gt;:	lw	v0,36(s8)     # v0 = 36(s8) = 传参</span><br><span class="line">   0x004018e8 &lt;+68&gt;:	nop</span><br><span class="line">   0x004018ec &lt;+72&gt;:	slt	v0,v0,v1   # v0 &gt; v1 则 v0 = 1</span><br><span class="line">   0x004018f0 &lt;+76&gt;:	beqz	v0,0x401924 &lt;fun7+128&gt; </span><br><span class="line">   # 传参 &lt;= v1就跳+128</span><br><span class="line">   </span><br><span class="line">   0x004018f4 &lt;+80&gt;:	nop</span><br><span class="line">   0x004018f8 &lt;+84&gt;:	lw	v0,32(s8)</span><br><span class="line">   0x004018fc &lt;+88&gt;:	nop</span><br><span class="line">   0x00401900 &lt;+92&gt;:	lw	v0,4(v0)        # v0的第二个成员变量</span><br><span class="line">   0x00401904 &lt;+96&gt;:	nop</span><br><span class="line">   0x00401908 &lt;+100&gt;:	move	a0,v0</span><br><span class="line">   0x0040190c &lt;+104&gt;:	lw	a1,36(s8)</span><br><span class="line">   0x00401910 &lt;+108&gt;:	jal	0x4018a4 &lt;fun7&gt;  # 进入递归</span><br><span class="line">   0x00401914 &lt;+112&gt;:	nop</span><br><span class="line">   0x00401918 &lt;+116&gt;:	sll	v0,v0,0x1       # 将fun7递归回来的返回值*2</span><br><span class="line">   0x0040191c &lt;+120&gt;:	b	0x401978 &lt;fun7+212&gt;</span><br><span class="line">   0x00401920 &lt;+124&gt;:	nop</span><br><span class="line">   # 传参 &lt; v0的第一个成员变量，就递归fun7，从递归回来后进入212行，212行是return，</span><br><span class="line">   # 传参 &lt; v0的第一个成员变量，就return fun7(v0的第二个成员变量)*2</span><br><span class="line">   </span><br><span class="line">   0x00401924 &lt;+128&gt;:	lw	v0,32(s8)</span><br><span class="line">   0x00401928 &lt;+132&gt;:	nop</span><br><span class="line">   0x0040192c &lt;+136&gt;:	lw	v1,0(v0)        # v1 = v0的第一个成员变量</span><br><span class="line">   0x00401930 &lt;+140&gt;:	lw	v0,36(s8)       # v0 = 36(s8) = 传参</span><br><span class="line">   0x00401934 &lt;+144&gt;:	nop</span><br><span class="line">   0x00401938 &lt;+148&gt;:	slt	v0,v1,v0        # v1 &gt; v0</span><br><span class="line">   0x0040193c &lt;+152&gt;:	beqz	v0,0x401974 &lt;fun7+208&gt; </span><br><span class="line">   # v1 &lt;= 传参就跳+208行，208行是return 0，结合从+76过来的条件，&lt;=和&gt;=就是等于</span><br><span class="line">   # v0的第一个成员变量==传参，就return 0</span><br><span class="line">   </span><br><span class="line">   0x00401940 &lt;+156&gt;:	nop</span><br><span class="line">   0x00401944 &lt;+160&gt;:	lw	v0,32(s8)</span><br><span class="line">   0x00401948 &lt;+164&gt;:	nop</span><br><span class="line">   0x0040194c &lt;+168&gt;:	lw	v0,8(v0)</span><br><span class="line">   0x00401950 &lt;+172&gt;:	nop</span><br><span class="line">   0x00401954 &lt;+176&gt;:	move	a0,v0</span><br><span class="line">   0x00401958 &lt;+180&gt;:	lw	a1,36(s8)</span><br><span class="line">   0x0040195c &lt;+184&gt;:	jal	0x4018a4 &lt;fun7&gt;</span><br><span class="line">   0x00401960 &lt;+188&gt;:	nop</span><br><span class="line">   0x00401964 &lt;+192&gt;:	sll	v0,v0,0x1    # v0 *= 2</span><br><span class="line">   0x00401968 &lt;+196&gt;:	addiu	v0,v0,1  # v0 + 1</span><br><span class="line">   0x0040196c &lt;+200&gt;:	b	0x401978 &lt;fun7+212&gt; # 跳到212返回v0</span><br><span class="line">   0x00401970 &lt;+204&gt;:	nop</span><br><span class="line">   # 传参 &gt; v0的第一个成员变量，就return fun7(v0的第三个成员变量)*2+1</span><br><span class="line">   </span><br><span class="line">   0x00401974 &lt;+208&gt;:	move	v0,zero  # 返回值为0</span><br><span class="line">   0x00401978 &lt;+212&gt;:	move	sp,s8</span><br><span class="line">   0x0040197c &lt;+216&gt;:	lw	ra,28(sp)</span><br><span class="line">   0x00401980 &lt;+220&gt;:	lw	s8,24(sp)</span><br><span class="line">   0x00401984 &lt;+224&gt;:	addiu	sp,sp,32</span><br><span class="line">   0x00401988 &lt;+228&gt;:	jr	ra</span><br><span class="line">   0x0040198c &lt;+232&gt;:	nop</span><br><span class="line">End of assembler dump.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">可以发现fun7是对一个搜索树(链表描述):</span><br><span class="line">这棵树从汇编源码中更易得到</span><br><span class="line">            36</span><br><span class="line">      8             50</span><br><span class="line">  6      22      45    107</span><br><span class="line">1   7  20  35  40  47 99  1001   </span><br><span class="line">左小右大，是二叉搜索树</span><br><span class="line">fun7翻译一下就是：</span><br><span class="line">int fun7(传参)</span><br><span class="line">&#123;</span><br><span class="line">    if(current==null) return -1;</span><br><span class="line">    if(current==传参) return 0;</span><br><span class="line">    else if(current&gt;传参) current=current.leftChild, return fun7(传参)*2;</span><br><span class="line">    else current=current.rightChild, return fun7(传参)*2+1;</span><br><span class="line">&#125;</span><br><span class="line">二叉搜索树的搜索节点算法，有节点返回路径，无节点返回-1</span><br><span class="line">比如搜索1001返回7，7的二进制是00000111，1代表往右子树，0代表往左子树，二进制从右往左数念h-1位（树的高度-1）就是&quot;右 右 右&quot;，代表从根到被搜索节点的路径。</span><br><span class="line"></span><br><span class="line">那么隐藏关卡答案就是：</span><br><span class="line">1001</span><br></pre></td></tr></table></figure></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://zhangt.top/CS/Solving-In-Binary-Bomb-Assigment/">计算机系统原理-二进制炸弹拆解实验记录</a></li><li><strong>本文作者：</strong><a href="https://zhangt.top">ZhangT</a></li><li><strong>本文链接：</strong><a href="https://zhangt.top/CS/Solving-In-Binary-Bomb-Assigment/">https://zhangt.top/CS/Solving-In-Binary-Bomb-Assigment/</a></li><li><strong>发布时间：</strong>2018-11-27</li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul><hr style="height:1px;margin:1rem 0"><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"><i class="fas fa-tags has-text-grey"></i>&nbsp; <a class="has-link-grey -link" href="/tags/CS/">CS</a></div></div></div></div></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？投喂一下吧！ヾ(●´∀｀●)</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i> </span><span>支付宝</span><div class="qrcode"><img src="/images/alipay.jpg" alt="支付宝"></div></a></div></div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-start"><a class="level level-item has-link-grey article-nav-prev" href="/ACM/ACMLife-0_0-First/"><i class="level-item fas fa-chevron-left"></i> <span class="level-item">ACMLife-0_0-领航帖</span></a></div><div class="level-end"><a class="level level-item has-link-grey article-nav-next" href="/ACM/An-ACM-Contest-Of-NingXia-Silk-Road/"><span class="level-item">ACMLife之宁夏丝绸之路赛</span> <i class="level-item fas fa-chevron-right"></i></a></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5 has-text-weight-normal">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.4.1/dist/gitalk.min.js"></script><script>var gitalk=new Gitalk({clientID:"91f36240e98756fc091e",clientSecret:"20de2f4dadd54bc04ad8db6c1090fb00a9477ac4",id:"d6d8c91fea9dc6ca6fcbec14534a6cdf",repo:"zhangt2333.github.io",owner:"zhangt2333",admin:"zhangt2333",createIssueManually:!1,distractionFreeMode:!1});gitalk.render("comment-container")</script></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content"><nav class="level" style="margin-bottom:1rem"><div class="level-item has-text-centered"><div><img class="image is-96x96 has-mb-6" src="/images/avatar.png" alt="Zhang T"><p class="is-size-4 is-block">Zhang T</p><p class="is-size-6 is-block">感受我的感受</p><p class="is-size-6 is-flex is-flex-center has-text-grey"><i class="fas fa-map-marker-alt has-mr-7"></i> <span>Qingdao, China</span></p></div></div></nav><nav class="level menu-list is-mobile" style="margin-bottom:1rem"><div class="level-item has-text-centered is-marginless"><a href="/archives/"><p class="heading">文章</p><p class="title has-text-weight-normal">18</p></a></div><div class="level-item has-text-centered is-marginless"><a href="/categories/"><p class="heading">分类</p><p class="title has-text-weight-normal">5</p></a></div><div class="level-item has-text-centered is-marginless"><a href="/tags/"><p class="heading">标签</p><p class="title has-text-weight-normal">20</p></a></div></nav><div class="level"><a class="level-item button is-link is-rounded" href="https://github.com/zhangt2333" target="_blank"><i class="fab fa-github"></i>&nbsp;&nbsp;关注我</a></div></div></div><div class="card widget column-left is-sticky" id="toc"><div class="card-content"><div class="menu" style="max-height:750px;overflow:auto"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#拆弹前置"><span class="has-mr-6">1</span> <span>拆弹前置</span></a><ul class="menu-list"><li><a class="is-flex" href="#mips学习"><span class="has-mr-6">1.1</span> <span>mips学习</span></a></li><li><a class="is-flex" href="#GDB使用"><span class="has-mr-6">1.2</span> <span>GDB使用</span></a></li><li><a class="is-flex" href="#方法"><span class="has-mr-6">1.3</span> <span>方法</span></a></li></ul></li><li><a class="is-flex" href="#愉快拆弹"><span class="has-mr-6">2</span> <span>愉快拆弹</span></a><ul class="menu-list"><li><a class="is-flex" href="#Main"><span class="has-mr-6">2.1</span> <span>Main</span></a></li><li><a class="is-flex" href="#Phase-1"><span class="has-mr-6">2.2</span> <span>Phase_1</span></a></li><li><a class="is-flex" href="#Phase-2"><span class="has-mr-6">2.3</span> <span>Phase_2</span></a></li><li><a class="is-flex" href="#phase-3"><span class="has-mr-6">2.4</span> <span>phase_3</span></a></li><li><a class="is-flex" href="#Phase-4"><span class="has-mr-6">2.5</span> <span>Phase_4</span></a><ul class="menu-list"><li><a class="is-flex" href="#引入func4"><span class="has-mr-6">2.5.1</span> <span>引入func4</span></a></li></ul></li><li><a class="is-flex" href="#Phase-5"><span class="has-mr-6">2.6</span> <span>Phase_5</span></a></li><li><a class="is-flex" href="#Phase-6"><span class="has-mr-6">2.7</span> <span>Phase_6</span></a></li><li><a class="is-flex" href="#secret-phase"><span class="has-mr-6">2.8</span> <span>secret_phase</span></a><ul class="menu-list"><li><a class="is-flex" href="#phase-defused探秘"><span class="has-mr-6">2.8.1</span> <span>phase_defused探秘</span></a></li><li><a class="is-flex" href="#正式进入secret-phase"><span class="has-mr-6">2.8.2</span> <span>正式进入secret_phase</span></a></li><li><a class="is-flex" href="#引入fun7"><span class="has-mr-6">2.8.3</span> <span>引入fun7</span></a></li></ul></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"><a class="footer-logo is-block has-mb-6" href="/">TTTT&#39;s Blog</a><p class="is-size-7">&copy; 2021 ZhangT&nbsp; Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle"><p class="control"><a class="button is-white is-large" target="_blank" title="GitHub" href="https://github.com/zhangt2333"><i class="fab fa-github"></i></a></p><p class="control"><a class="button is-white is-large" target="_blank" title="E-mail" href="mailto:zhangt2333@gmail.com"><i class="fa fa-envelope-open"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script>var IcarusThemeSettings={article:{highlight:{clipboard:!0,fold:"unfolded"}}}</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script src="/js/gallery.js" defer></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><script>document.addEventListener("DOMContentLoaded",function(){MathJax.Hub.Config({"HTML-CSS":{matchFontHeight:!1},SVG:{matchFontHeight:!1},CommonHTML:{matchFontHeight:!1},skipTags:["script","noscript","style","textarea","pre","code"],processEscapes:!0,tex2jax:{inlineMath:[["$","$"]]}})})</script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><script src="/js/main.js" defer></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js" defer></script><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/insight.css"><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>